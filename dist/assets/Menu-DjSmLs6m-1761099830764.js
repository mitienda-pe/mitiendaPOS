import{g as p,q as S,m as L,p as H,c as r,b as _,o as i,d as e,f as R,i as B,v as I,t as n,x as q,n as V,F as D,r as z,e as M,j as P,h as k,A as G,u as Z,y as K,E as $,H as J}from"./index-B9kELMXP-1761099830764.js";import{D as U}from"./cashDenominations-Cv48tYhz-1761099830764.js";const Y={key:0,class:"fixed inset-0 z-50 overflow-y-auto"},Q={class:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},W={class:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full"},X={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},ee={class:"sm:flex sm:items-start"},te={class:"mt-3 text-center sm:mt-0 sm:text-left w-full"},se={class:"mt-2"},oe={class:"mb-4"},le={class:"mb-4"},ne={class:"flex justify-between items-center mb-2"},ae={class:"relative"},re=["readonly"],ie={key:0,class:"text-xs text-gray-500 mt-1"},de={key:0,class:"mb-4 p-3 border border-gray-300 rounded-lg bg-gray-50"},ue={class:"mb-3"},ce={class:"grid grid-cols-2 gap-2"},me={class:"text-xs font-medium text-gray-700 w-16"},xe=["onUpdate:modelValue"],fe={class:"text-xs text-gray-500 w-16 text-right"},ve={class:"grid grid-cols-2 gap-2"},pe={class:"text-xs font-medium text-gray-700 w-16"},be=["onUpdate:modelValue"],he={class:"text-xs text-gray-500 w-16 text-right"},ge={class:"mt-3 pt-3 border-t border-gray-300"},ye={class:"flex justify-between items-center"},we={class:"text-lg font-bold text-gray-900"},ke={class:"flex items-center justify-between text-sm"},_e={class:"mb-4"},je={key:1,class:"bg-red-50 border border-red-200 rounded-lg p-3 mb-4"},Ce={class:"text-sm text-red-700"},$e={class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse gap-2"},Me=["disabled"],Se={key:0,class:"animate-spin -ml-1 mr-2 h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24"},Ve=["disabled"],Ae={__name:"OpenShiftModal",props:{modelValue:Boolean},emits:["update:modelValue","opened"],setup(m,{emit:g}){const y=m,j=g,d=p(""),b=p(0),v=p(""),x=p(!1),f=p(null),u=p(null),t=p(null),o=p(!1),a=p({200:0,100:0,50:0,20:0,10:0,5:0,2:0,1:0,.5:0,.2:0,.1:0}),C=S(()=>{let w=0;for(const[l,c]of Object.entries(a.value))w+=parseFloat(l)*parseInt(c||0);return Math.round(w*100)/100}),E=S(()=>o.value?Math.round((b.value-C.value)*100)/100:0),A=S(()=>o.value?Math.abs(E.value)<.01:!0),O=S(()=>!(b.value<0||o.value&&!A.value));L(()=>y.modelValue,w=>{w&&(H(()=>{var l;(l=u.value)==null||l.focus()}),d.value="",b.value=0,v.value="",f.value=null,o.value=!1,Object.keys(a.value).forEach(l=>{a.value[l]=0}))}),L(C,w=>{o.value&&w>0&&(b.value=w)});const T=async()=>{if(!(!O.value||x.value)){f.value=null,x.value=!0;try{const w={cajaNumero:d.value.trim()||null,montoInicial:parseFloat(b.value),notas:v.value.trim()};o.value&&(w.breakdown={...a.value}),j("opened",w)}catch(w){f.value=w.message||"Error al abrir el turno"}finally{x.value=!1}}},N=()=>{x.value||j("update:modelValue",!1)};return(w,l)=>m.modelValue?(i(),r("div",Y,[e("div",Q,[l[17]||(l[17]=e("div",{class:"fixed inset-0 transition-opacity","aria-hidden":"true"},[e("div",{class:"absolute inset-0 bg-gray-500 opacity-75"})],-1)),l[18]||(l[18]=e("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"},"​",-1)),e("div",W,[e("div",X,[e("div",ee,[e("div",te,[l[15]||(l[15]=e("h3",{class:"text-lg leading-6 font-medium text-gray-900 mb-4"}," Abrir Turno de Caja ",-1)),e("div",se,[l[13]||(l[13]=e("p",{class:"text-sm text-gray-500 mb-4"}," Ingrese el monto inicial en efectivo que tiene en caja para iniciar el turno. ",-1)),e("div",oe,[l[4]||(l[4]=e("label",{for:"caja-numero",class:"block text-sm font-medium text-gray-700 mb-2"}," Número de Caja (Opcional) ",-1)),B(e("input",{id:"caja-numero",ref_key:"cajaInput",ref:u,"onUpdate:modelValue":l[0]||(l[0]=c=>d.value=c),type:"text",placeholder:"Ej: CAJA-01, POS-LIMA-01",maxlength:"50",class:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-blue-500"},null,512),[[I,d.value]]),l[5]||(l[5]=e("p",{class:"text-xs text-gray-500 mt-1"}," Deje en blanco si solo tiene una caja. Use identificadores como CAJA-01, POS-LIMA-01 para múltiples cajas. ",-1))]),e("div",le,[e("div",ne,[l[6]||(l[6]=e("label",{for:"monto-inicial",class:"block text-sm font-medium text-gray-700"}," Monto Inicial en Efectivo * ",-1)),e("button",{type:"button",onClick:l[1]||(l[1]=c=>o.value=!o.value),class:"text-xs text-blue-600 hover:text-blue-800 underline"},n(o.value?"Ocultar":"Desglosar")+" denominaciones ",1)]),e("div",ae,[l[7]||(l[7]=e("span",{class:"absolute left-3 top-2 text-gray-500"},"S/",-1)),B(e("input",{id:"monto-inicial",ref_key:"montoInput",ref:t,"onUpdate:modelValue":l[2]||(l[2]=c=>b.value=c),type:"number",step:"0.01",min:"0",placeholder:"0.00",readonly:o.value,class:V(["pl-10 w-full p-2 border rounded-lg focus:ring-2 focus:ring-blue-500",o.value?"bg-gray-100 cursor-not-allowed":""]),onKeyup:q(T,["enter"])},null,42,re),[[I,b.value]])]),o.value?(i(),r("p",ie," El monto se calcula automáticamente del desglose ")):_("",!0)]),o.value?(i(),r("div",de,[l[11]||(l[11]=e("h4",{class:"text-sm font-medium text-gray-700 mb-3"},"Arqueo - Conteo de denominaciones",-1)),e("div",ue,[l[8]||(l[8]=e("h5",{class:"text-xs font-medium text-gray-600 mb-2 uppercase"},"Billetes",-1)),e("div",ce,[(i(!0),r(D,null,z(M(U).bills,c=>(i(),r("div",{key:c,class:"flex items-center space-x-2"},[e("label",me,"S/ "+n(c),1),B(e("input",{type:"number","onUpdate:modelValue":h=>a.value[c]=h,min:"0",step:"1",placeholder:"0",class:"flex-1 px-2 py-1 text-sm border rounded focus:ring-1 focus:ring-blue-500"},null,8,xe),[[I,a.value[c],void 0,{number:!0}]]),e("span",fe," S/ "+n((c*(a.value[c]||0)).toFixed(2)),1)]))),128))])]),e("div",null,[l[9]||(l[9]=e("h5",{class:"text-xs font-medium text-gray-600 mb-2 uppercase"},"Monedas",-1)),e("div",ve,[(i(!0),r(D,null,z(M(U).coins,c=>(i(),r("div",{key:c,class:"flex items-center space-x-2"},[e("label",pe,"S/ "+n(c.toFixed(2)),1),B(e("input",{type:"number","onUpdate:modelValue":h=>a.value[c]=h,min:"0",step:"1",placeholder:"0",class:"flex-1 px-2 py-1 text-sm border rounded focus:ring-1 focus:ring-blue-500"},null,8,be),[[I,a.value[c],void 0,{number:!0}]]),e("span",he," S/ "+n((c*(a.value[c]||0)).toFixed(2)),1)]))),128))])]),e("div",ge,[e("div",ye,[l[10]||(l[10]=e("span",{class:"text-sm font-medium text-gray-700"},"Total contado:",-1)),e("span",we,"S/ "+n(C.value.toFixed(2)),1)]),Math.abs(E.value)>.01?(i(),r("div",{key:0,class:V(["mt-2 p-2 rounded",A.value?"bg-green-50":"bg-red-50"])},[e("div",ke,[e("span",{class:V(A.value?"text-green-700":"text-red-700")},n(A.value?"✓ Coincide":"✗ No coincide"),3),e("span",{class:V(A.value?"text-green-700 font-medium":"text-red-700 font-medium")}," Diferencia: S/ "+n(Math.abs(E.value).toFixed(2)),3)])],2)):_("",!0)])])):_("",!0),e("div",_e,[l[12]||(l[12]=e("label",{for:"notas",class:"block text-sm font-medium text-gray-700 mb-2"}," Notas (Opcional) ",-1)),B(e("textarea",{id:"notas","onUpdate:modelValue":l[3]||(l[3]=c=>v.value=c),rows:"3",placeholder:"Ej: Billetes de S/ 100 x 5, Monedas de S/ 1 x 20...",class:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-blue-500"},null,512),[[I,v.value]])]),l[14]||(l[14]=R('<div class="bg-blue-50 border border-blue-200 rounded-lg p-3 mb-4"><div class="flex"><svg class="h-5 w-5 text-blue-400 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><div class="text-sm text-blue-700"><p class="font-medium">Importante:</p><p class="mt-1">El monto inicial debe coincidir con el efectivo real que tiene en caja. Este será el punto de partida para el arqueo al cierre del turno.</p></div></div></div>',1)),f.value?(i(),r("div",je,[e("p",Ce,n(f.value),1)])):_("",!0)])])])]),e("div",$e,[e("button",{onClick:T,disabled:x.value||!O.value,class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-green-600 text-base font-medium text-white hover:bg-green-700 focus:outline-none sm:w-auto sm:text-sm disabled:opacity-50 disabled:cursor-not-allowed"},[x.value?(i(),r("svg",Se,l[16]||(l[16]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):_("",!0),P(" "+n(x.value?"Abriendo...":"Abrir Turno"),1)],8,Me),e("button",{onClick:N,disabled:x.value,class:"mt-3 sm:mt-0 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none sm:w-auto sm:text-sm disabled:opacity-50"}," Cancelar ",8,Ve)])])])])):_("",!0)}},Be={class:"p-3 border border-gray-300 rounded-lg bg-gray-50"},Ie={class:"text-sm font-medium text-gray-700 mb-3"},Fe={class:"mb-3"},Ee={class:"grid grid-cols-1 gap-2"},Oe={class:"text-xs font-medium text-gray-700 min-w-[60px]"},Te=["value","onInput"],Ne={class:"text-xs text-gray-500 min-w-[70px] text-right"},De={class:"grid grid-cols-1 gap-2"},ze={class:"text-xs font-medium text-gray-700 min-w-[60px]"},Ue=["value","onInput"],Le={class:"text-xs text-gray-500 min-w-[70px] text-right"},Pe={class:"mt-3 pt-3 border-t border-gray-300"},He={class:"flex justify-between items-center"},qe={class:"text-sm font-medium text-gray-700"},Re={class:"text-lg font-bold text-gray-900"},Ge={class:"flex items-center justify-between text-sm"},Ze={__name:"CashBreakdownInput",props:{modelValue:{type:Object,default:()=>({})},expectedAmount:{type:Number,default:null},title:{type:String,default:"Arqueo - Conteo de denominaciones"},totalLabel:{type:String,default:"Total contado"}},emits:["update:modelValue","update:total"],setup(m,{emit:g}){const y=m,j=g,d=S(()=>y.modelValue),b=S(()=>{let u=0;for(const[t,o]of Object.entries(d.value))u+=parseFloat(t)*parseInt(o||0);return Math.round(u*100)/100}),v=S(()=>y.expectedAmount===null?0:Math.round((b.value-y.expectedAmount)*100)/100),x=S(()=>y.expectedAmount===null?!0:Math.abs(v.value)<.01),f=(u,t)=>{const o={...d.value};let a=parseInt(t)||0;a<0&&(a=0),a>999&&(a=999),o[u]=a,j("update:modelValue",o),j("update:total",b.value)};return(u,t)=>(i(),r("div",Be,[e("h4",Ie,n(m.title),1),e("div",Fe,[t[0]||(t[0]=e("h5",{class:"text-xs font-medium text-gray-600 mb-2 uppercase"},"Billetes",-1)),e("div",Ee,[(i(!0),r(D,null,z(M(U).bills,o=>(i(),r("div",{key:o,class:"flex items-center justify-between gap-2"},[e("label",Oe,"S/ "+n(o),1),e("input",{type:"number",value:d.value[o]||0,onInput:a=>f(o,a.target.value),min:"0",max:"999",step:"1",placeholder:"0",class:"w-14 px-1 py-1 text-sm text-center border rounded focus:ring-1 focus:ring-blue-500"},null,40,Te),e("span",Ne," S/ "+n((o*(d.value[o]||0)).toFixed(2)),1)]))),128))])]),e("div",null,[t[1]||(t[1]=e("h5",{class:"text-xs font-medium text-gray-600 mb-2 uppercase"},"Monedas",-1)),e("div",De,[(i(!0),r(D,null,z(M(U).coins,o=>(i(),r("div",{key:o,class:"flex items-center justify-between gap-2"},[e("label",ze,"S/ "+n(o.toFixed(2)),1),e("input",{type:"number",value:d.value[o]||0,onInput:a=>f(o,a.target.value),min:"0",max:"999",step:"1",placeholder:"0",class:"w-14 px-1 py-1 text-sm text-center border rounded focus:ring-1 focus:ring-blue-500"},null,40,Ue),e("span",Le," S/ "+n((o*(d.value[o]||0)).toFixed(2)),1)]))),128))])]),e("div",Pe,[e("div",He,[e("span",qe,n(m.totalLabel)+":",1),e("span",Re,"S/ "+n(b.value.toFixed(2)),1)]),m.expectedAmount!==null&&Math.abs(v.value)>.01?(i(),r("div",{key:0,class:V(["mt-2 p-2 rounded",x.value?"bg-green-50":"bg-red-50"])},[e("div",Ge,[e("span",{class:V(x.value?"text-green-700":"text-red-700")},n(x.value?"✓ Coincide":"✗ No coincide"),3),e("span",{class:V(x.value?"text-green-700 font-medium":"text-red-700 font-medium")},n(v.value>0?"Sobrante":"Faltante")+": S/ "+n(Math.abs(v.value).toFixed(2)),3)])],2)):_("",!0)])]))}},Ke={key:0,class:"fixed inset-0 z-50 overflow-y-auto"},Je={class:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},Ye={class:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-2xl sm:w-full"},Qe={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},We={class:"sm:flex sm:items-start"},Xe={class:"mt-3 text-center sm:mt-0 sm:text-left w-full"},et={key:0,class:"mt-2"},tt={class:"bg-gray-50 rounded-lg p-4 mb-4"},st={class:"grid grid-cols-2 gap-4 mb-4"},ot={class:"text-sm font-medium"},lt={class:"text-sm font-medium"},nt={class:"border-t pt-3"},at={class:"space-y-2"},rt={class:"flex justify-between text-sm"},it={class:"font-medium"},dt={class:"flex justify-between text-sm"},ut={class:"font-medium"},ct={class:"flex justify-between text-sm text-gray-600"},mt={class:"flex justify-between text-sm text-gray-600"},xt={class:"flex justify-between text-sm text-gray-600"},ft={class:"flex justify-between text-sm text-gray-600"},vt={class:"flex justify-between text-sm font-medium border-t pt-2"},pt={class:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4"},bt={class:"flex justify-between items-center"},ht={class:"text-xs text-blue-700 mt-1"},gt={class:"text-2xl font-bold text-blue-900"},yt={class:"mb-4"},wt={class:"flex justify-between items-center mb-2"},kt={class:"relative"},_t=["readonly"],jt={key:0,class:"text-xs text-gray-500 mt-1"},Ct={key:1,class:"text-xs text-gray-500 mt-1"},$t={key:0,class:"mb-4"},Mt={class:"flex items-center"},St={key:0,class:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},Vt={key:1,class:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},At={key:2,class:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},Bt={class:"flex-1"},It={class:"text-sm font-medium"},Ft={class:"text-2xl font-bold mt-1"},Et={class:"mb-4"},Ot={key:2,class:"bg-red-50 border border-red-200 rounded-lg p-3 mb-4"},Tt={class:"text-sm text-red-700"},Nt={class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse gap-2"},Dt=["disabled"],zt={key:0,class:"animate-spin -ml-1 mr-2 h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24"},Ut=["disabled"],Lt={__name:"CloseShiftModal",props:{modelValue:Boolean,shift:Object},emits:["update:modelValue","closed"],setup(m,{emit:g}){const y=m,j=g,d=p(null),b=p(""),v=p(!1),x=p(null),f=p(0),u=p(null),t=p(!1),o=p({200:0,100:0,50:0,20:0,10:0,5:0,2:0,1:0,.5:0,.2:0,.1:0}),a=S(()=>y.shift?y.shift.monto_inicial+y.shift.total_efectivo:0),C=S(()=>d.value!==null&&d.value>=0),E=S(()=>f.value>0?"bg-green-50 border border-green-200 text-green-700":f.value<0?"bg-red-50 border border-red-200 text-red-700":"bg-blue-50 border border-blue-200 text-blue-700"),A=S(()=>f.value>0?"Sobrante":f.value<0?"Faltante":"Cuadrado Perfecto");L(()=>y.modelValue,h=>{h&&(H(()=>{var s;(s=u.value)==null||s.focus()}),d.value=null,b.value="",x.value=null,f.value=0,t.value=!1,Object.keys(o.value).forEach(s=>{o.value[s]=0}))});const O=()=>{d.value!==null&&d.value!==""?f.value=parseFloat(d.value)-a.value:f.value=0},T=h=>{d.value=h,O()},N=async()=>{if(!(!C.value||v.value)){x.value=null,v.value=!0;try{const h={montoReal:parseFloat(d.value),notas:b.value.trim()};t.value&&(h.breakdown={...o.value}),j("closed",h)}catch(h){x.value=h.message||"Error al cerrar el turno"}finally{v.value=!1}}},w=()=>{v.value||j("update:modelValue",!1)},l=h=>`S/ ${parseFloat(h||0).toFixed(2)}`,c=h=>h?new Date(h).toLocaleString("es-PE",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"";return(h,s)=>m.modelValue?(i(),r("div",Ke,[e("div",Je,[s[24]||(s[24]=e("div",{class:"fixed inset-0 transition-opacity","aria-hidden":"true"},[e("div",{class:"absolute inset-0 bg-gray-500 opacity-75"})],-1)),s[25]||(s[25]=e("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"},"​",-1)),e("div",Ye,[e("div",Qe,[e("div",We,[e("div",Xe,[s[22]||(s[22]=e("h3",{class:"text-lg leading-6 font-medium text-gray-900 mb-4"}," Cerrar Turno de Caja ",-1)),m.shift?(i(),r("div",et,[e("div",tt,[s[14]||(s[14]=e("h4",{class:"text-sm font-medium text-gray-700 mb-3"},"Resumen del Turno",-1)),e("div",st,[e("div",null,[s[4]||(s[4]=e("p",{class:"text-xs text-gray-500"},"Inicio",-1)),e("p",ot,n(c(m.shift.fecha_apertura)),1)]),e("div",null,[s[5]||(s[5]=e("p",{class:"text-xs text-gray-500"},"Monto Inicial",-1)),e("p",lt,n(l(m.shift.monto_inicial)),1)])]),e("div",nt,[s[13]||(s[13]=e("p",{class:"text-xs text-gray-500 mb-2"},"Ventas del Turno",-1)),e("div",at,[e("div",rt,[s[6]||(s[6]=e("span",null,"Número de ventas:",-1)),e("span",it,n(m.shift.numero_ventas||0),1)]),e("div",dt,[s[7]||(s[7]=e("span",null,"Efectivo:",-1)),e("span",ut,n(l(m.shift.total_efectivo)),1)]),e("div",ct,[s[8]||(s[8]=e("span",null,"Tarjeta:",-1)),e("span",null,n(l(m.shift.total_tarjeta)),1)]),e("div",mt,[s[9]||(s[9]=e("span",null,"Yape:",-1)),e("span",null,n(l(m.shift.total_yape)),1)]),e("div",xt,[s[10]||(s[10]=e("span",null,"Plin:",-1)),e("span",null,n(l(m.shift.total_plin)),1)]),e("div",ft,[s[11]||(s[11]=e("span",null,"Transferencia:",-1)),e("span",null,n(l(m.shift.total_transferencia)),1)]),e("div",vt,[s[12]||(s[12]=e("span",null,"Total Ventas:",-1)),e("span",null,n(l(m.shift.total_ventas)),1)])])])]),e("div",pt,[e("div",bt,[e("div",null,[s[15]||(s[15]=e("p",{class:"text-sm font-medium text-blue-900"},"Efectivo Esperado en Caja",-1)),e("p",ht," Inicial ("+n(l(m.shift.monto_inicial))+") + Efectivo de ventas ("+n(l(m.shift.total_efectivo))+") ",1)]),e("p",gt,n(l(a.value)),1)])]),e("div",yt,[e("div",wt,[s[16]||(s[16]=e("label",{for:"monto-real",class:"block text-sm font-medium text-gray-700"}," Efectivo Real Contado * ",-1)),e("button",{type:"button",onClick:s[0]||(s[0]=F=>t.value=!t.value),class:"text-xs text-blue-600 hover:text-blue-800 underline"},n(t.value?"Ocultar":"Desglosar")+" denominaciones ",1)]),e("div",kt,[s[17]||(s[17]=e("span",{class:"absolute left-3 top-2 text-gray-500"},"S/",-1)),B(e("input",{id:"monto-real",ref_key:"montoInput",ref:u,"onUpdate:modelValue":s[1]||(s[1]=F=>d.value=F),type:"number",step:"0.01",min:"0",placeholder:"0.00",readonly:t.value,class:V(["pl-10 w-full p-2 border rounded-lg focus:ring-2 focus:ring-blue-500 text-lg font-medium",t.value?"bg-gray-100 cursor-not-allowed":""]),onInput:O,onKeyup:q(N,["enter"])},null,42,_t),[[I,d.value]])]),t.value?(i(),r("p",Ct," El monto se calcula automáticamente del desglose ")):(i(),r("p",jt," Cuente el efectivo real que tiene en caja y registre el monto exacto "))]),t.value?(i(),r("div",$t,[k(Ze,{modelValue:o.value,"onUpdate:modelValue":s[2]||(s[2]=F=>o.value=F),"expected-amount":a.value,title:"Arqueo de Cierre - Conteo de denominaciones","total-label":"Efectivo Real Contado","onUpdate:total":T},null,8,["modelValue","expected-amount"])])):_("",!0),d.value!==null&&d.value!==""?(i(),r("div",{key:1,class:V(["mb-4 p-4 rounded-lg",E.value])},[e("div",Mt,[f.value>0?(i(),r("svg",St,s[18]||(s[18]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"},null,-1)]))):f.value<0?(i(),r("svg",Vt,s[19]||(s[19]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 17h8m0 0V9m0 8l-8-8-4 4-6-6"},null,-1)]))):(i(),r("svg",At,s[20]||(s[20]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)]))),e("div",Bt,[e("p",It,n(A.value),1),e("p",Ft,n(l(Math.abs(f.value))),1)])])],2)):_("",!0),e("div",Et,[s[21]||(s[21]=e("label",{for:"notas",class:"block text-sm font-medium text-gray-700 mb-2"}," Notas de Cierre (Opcional) ",-1)),B(e("textarea",{id:"notas","onUpdate:modelValue":s[3]||(s[3]=F=>b.value=F),rows:"3",placeholder:"Ej: Observaciones, incidencias, billetes dañados...",class:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-blue-500"},null,512),[[I,b.value]])]),x.value?(i(),r("div",Ot,[e("p",Tt,n(x.value),1)])):_("",!0)])):_("",!0)])])]),e("div",Nt,[e("button",{onClick:N,disabled:v.value||!C.value,class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none sm:w-auto sm:text-sm disabled:opacity-50 disabled:cursor-not-allowed"},[v.value?(i(),r("svg",zt,s[23]||(s[23]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):_("",!0),P(" "+n(v.value?"Cerrando...":"Cerrar Turno"),1)],8,Dt),e("button",{onClick:w,disabled:v.value,class:"mt-3 sm:mt-0 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none sm:w-auto sm:text-sm disabled:opacity-50"}," Cancelar ",8,Ut)])])])])):_("",!0)}},Pt={class:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8"},Ht={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"},qt={class:"block"},Rt={class:"flex flex-col items-center justify-center h-full text-center"},Gt={key:0,class:"w-full mb-3"},Zt={class:"bg-green-50 border border-green-200 rounded-lg p-3 mb-2"},Kt={class:"text-sm text-green-700"},Jt={class:"text-lg font-bold text-green-900 mt-1"},Yt={key:0,class:"text-xs text-green-600 mt-1"},Qt={key:1,class:"w-full"},es={__name:"Menu",setup(m){const g=G();Z();const y=p(!1),j=p(!1);K(async()=>{await g.fetchActiveShift()});const d=()=>{y.value=!0},b=()=>{j.value=!0},v=async u=>{const t=await g.openShift(u.montoInicial,u.notas,u.cajaNumero);if(t.success){y.value=!1;const o="Turno abierto exitosamente",a=u.cajaNumero?`
Caja: ${u.cajaNumero}`:"";alert(o+a)}else alert(t.error||"Error al abrir el turno")},x=async u=>{const t=await g.closeShift(u.montoReal,u.notas);if(t.success){j.value=!1;const o=t.data,a=o.diferencia;let C=`Turno cerrado exitosamente

`;C+=`Esperado: S/ ${o.monto_esperado.toFixed(2)}
`,C+=`Real: S/ ${o.monto_real.toFixed(2)}
`,a>0?C+=`
Sobrante: S/ ${a.toFixed(2)}`:a<0?C+=`
Faltante: S/ ${Math.abs(a).toFixed(2)}`:C+=`
¡Cuadrado perfecto! ✓`,alert(C)}else alert(t.error||"Error al cerrar el turno")},f=u=>u?new Date(u).toLocaleString("es-PE",{hour:"2-digit",minute:"2-digit",day:"2-digit",month:"short"}):"";return(u,t)=>{const o=J("router-link");return i(),r("div",Pt,[t[18]||(t[18]=e("h1",{class:"text-2xl font-semibold text-gray-900 mb-6"},"Menú Principal",-1)),e("div",Ht,[k(o,{to:"/dashboard",class:"block"},{default:$(()=>t[2]||(t[2]=[e("div",{class:"bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow duration-300 p-6 h-full border-l-4 border-orange-500"},[e("div",{class:"flex flex-col items-center justify-center h-full text-center"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-16 w-16 text-orange-500 mb-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83"}),e("path",{d:"M22 12A10 10 0 0 0 12 2v10z"})]),e("h2",{class:"text-xl font-medium text-gray-900 mb-2"},"Dashboard"),e("p",{class:"text-gray-600 text-center"},"Visualiza indicadores y gráficos")])],-1)])),_:1}),e("div",qt,[e("div",{class:V(["bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow duration-300 p-6 h-full",M(g).hasActiveShift?"border-l-4 border-green-500":"border-l-4 border-red-500"])},[e("div",Rt,[(i(),r("svg",{xmlns:"http://www.w3.org/2000/svg",class:V([M(g).hasActiveShift?"text-green-500":"text-red-500","h-16 w-16 mb-4"]),viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},t[3]||(t[3]=[e("rect",{x:"2",y:"5",width:"20",height:"14",rx:"2"},null,-1),e("line",{x1:"2",y1:"10",x2:"22",y2:"10"},null,-1)]),2)),t[7]||(t[7]=e("h2",{class:"text-xl font-medium text-gray-900 mb-2"},"Caja",-1)),M(g).hasActiveShift?(i(),r("div",Gt,[e("div",Zt,[t[4]||(t[4]=e("p",{class:"text-xs font-medium text-green-800 mb-1"},"Turno Abierto",-1)),e("p",Kt,"Inicio: "+n(f(M(g).activeShift.fecha_apertura)),1),e("p",Jt," S/ "+n(M(g).activeShift.monto_inicial.toFixed(2)),1),M(g).activeShift.caja_numero?(i(),r("p",Yt,n(M(g).activeShift.caja_numero),1)):_("",!0)]),e("button",{onClick:b,class:"w-full px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors text-sm font-medium"}," Cerrar Turno ")])):(i(),r("div",Qt,[t[5]||(t[5]=e("p",{class:"text-gray-600 text-sm mb-3"},"No hay turno activo",-1)),e("button",{onClick:d,class:"w-full px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm font-medium"}," Abrir Turno ")])),k(o,{to:"/shifts",class:"text-xs text-blue-600 hover:text-blue-800 mt-3 underline"},{default:$(()=>t[6]||(t[6]=[P(" Ver historial de turnos ")])),_:1})])],2)]),k(o,{to:"/pos",class:"block"},{default:$(()=>t[8]||(t[8]=[e("div",{class:"bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow duration-300 p-6 h-full border-l-4 border-blue-500"},[e("div",{class:"flex flex-col items-center justify-center h-full text-center"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-16 w-16 text-blue-500 mb-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("rect",{x:"2",y:"3",width:"20",height:"14",rx:"2",ry:"2"}),e("line",{x1:"8",y1:"21",x2:"16",y2:"21"}),e("line",{x1:"12",y1:"17",x2:"12",y2:"21"})]),e("h2",{class:"text-xl font-medium text-gray-900 mb-2"},"POS"),e("p",{class:"text-gray-600 text-center"},"Gestiona ventas y emite comprobantes")])],-1)])),_:1}),k(o,{to:"/inventory",class:"block"},{default:$(()=>t[9]||(t[9]=[e("div",{class:"bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow duration-300 p-6 h-full border-l-4 border-green-500"},[e("div",{class:"flex flex-col items-center justify-center h-full text-center"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-16 w-16 text-green-500 mb-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M2.97 12.92A2 2 0 0 0 2 14.63v3.24a2 2 0 0 0 .97 1.71l3 1.8a2 2 0 0 0 2.06 0L12 19v-5.5l-5-3-4.03 2.42Z"}),e("path",{d:"m7 16.5-4.74-2.85"}),e("path",{d:"m7 16.5 5-3"}),e("path",{d:"M7 16.5v5.17"}),e("path",{d:"M12 13.5V19l3.97 2.38a2 2 0 0 0 2.06 0l3-1.8a2 2 0 0 0 .97-1.71v-3.24a2 2 0 0 0-.97-1.71L17 10.5l-5 3Z"}),e("path",{d:"m17 16.5-5-3"}),e("path",{d:"m17 16.5 4.74-2.85"}),e("path",{d:"M17 16.5v5.17"}),e("path",{d:"M7.97 4.42A2 2 0 0 0 7 6.13v4.37l5 3 5-3V6.13a2 2 0 0 0-.97-1.71l-3-1.8a2 2 0 0 0-2.06 0l-3 1.8Z"}),e("path",{d:"M12 8 7.26 5.15"}),e("path",{d:"m12 8 4.74-2.85"}),e("path",{d:"M12 13.5V8"})]),e("h2",{class:"text-xl font-medium text-gray-900 mb-2"},"Inventario"),e("p",{class:"text-gray-600 text-center"},"Gestiona productos, stock y categorías")])],-1)])),_:1}),k(o,{to:"/sales",class:"block"},{default:$(()=>t[10]||(t[10]=[e("div",{class:"bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow duration-300 p-6 h-full border-l-4 border-cyan-500"},[e("div",{class:"flex flex-col items-center justify-center h-full text-center"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-16 w-16 text-cyan-500 mb-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M3 3v18h18"}),e("path",{d:"M18.4 8.64L18.57 8.8a2 2 0 0 1 0 2.83l-8.49 8.48a2 2 0 0 1-2.83 0l-.17-.17a2 2 0 0 1 0-2.83l8.49-8.48a2 2 0 0 1 2.83 0Z"}),e("path",{d:"M15 8h5v5"}),e("path",{d:"M18 11l-7 7"})]),e("h2",{class:"text-xl font-medium text-gray-900 mb-2"},"Ventas"),e("p",{class:"text-gray-600 text-center"},"Consulta el historial de ventas")])],-1)])),_:1}),k(o,{to:"/customers",class:"block"},{default:$(()=>t[11]||(t[11]=[e("div",{class:"bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow duration-300 p-6 h-full border-l-4 border-purple-500"},[e("div",{class:"flex flex-col items-center justify-center h-full text-center"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-16 w-16 text-purple-500 mb-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),e("circle",{cx:"12",cy:"7",r:"4"})]),e("h2",{class:"text-xl font-medium text-gray-900 mb-2"},"Clientes"),e("p",{class:"text-gray-600 text-center"},"Administra tu cartera de clientes")])],-1)])),_:1}),k(o,{to:"/documents",class:"block"},{default:$(()=>t[12]||(t[12]=[e("div",{class:"bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow duration-300 p-6 h-full border-l-4 border-amber-500"},[e("div",{class:"flex flex-col items-center justify-center h-full text-center"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-16 w-16 text-amber-500 mb-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),e("polyline",{points:"14 2 14 8 20 8"}),e("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),e("line",{x1:"16",y1:"17",x2:"8",y2:"17"}),e("polyline",{points:"10 9 9 9 8 9"})]),e("h2",{class:"text-xl font-medium text-gray-900 mb-2"},"Documentos"),e("p",{class:"text-gray-600 text-center"},"Gestiona documentos y comprobantes")])],-1)])),_:1}),k(o,{to:"/promotions",class:"block"},{default:$(()=>t[13]||(t[13]=[e("div",{class:"bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow duration-300 p-6 h-full border-l-4 border-pink-500"},[e("div",{class:"flex flex-col items-center justify-center h-full text-center"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-16 w-16 text-pink-500 mb-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("line",{x1:"19",y1:"5",x2:"5",y2:"19"}),e("circle",{cx:"6.5",cy:"6.5",r:"2.5"}),e("circle",{cx:"17.5",cy:"17.5",r:"2.5"})]),e("h2",{class:"text-xl font-medium text-gray-900 mb-2"},"Descuentos y Promociones"),e("p",{class:"text-gray-600 text-center"},"Gestiona ofertas y promociones")])],-1)])),_:1}),k(o,{to:"/returns",class:"block"},{default:$(()=>t[14]||(t[14]=[e("div",{class:"bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow duration-300 p-6 h-full border-l-4 border-teal-500"},[e("div",{class:"flex flex-col items-center justify-center h-full text-center"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-16 w-16 text-teal-500 mb-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"}),e("path",{d:"M3 3v5h5"}),e("path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16"}),e("path",{d:"M16 16h5v5"})]),e("h2",{class:"text-xl font-medium text-gray-900 mb-2"},"Cambios y devoluciones"),e("p",{class:"text-gray-600 text-center"},"Gestiona cambios y devoluciones de productos")])],-1)])),_:1}),k(o,{to:"/vouchers",class:"block"},{default:$(()=>t[15]||(t[15]=[e("div",{class:"bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow duration-300 p-6 h-full border-l-4 border-yellow-500"},[e("div",{class:"flex flex-col items-center justify-center h-full text-center"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-16 w-16 text-yellow-500 mb-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("rect",{x:"3",y:"8",width:"18",height:"4",rx:"1"}),e("path",{d:"M12 8v13"}),e("path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7"}),e("path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5"})]),e("h2",{class:"text-xl font-medium text-gray-900 mb-2"},"Vales y Tarjetas de Regalo"),e("p",{class:"text-gray-600 text-center"},"Gestiona vales de consumo y tarjetas de regalo")])],-1)])),_:1}),k(o,{to:"/branches",class:"block"},{default:$(()=>t[16]||(t[16]=[e("div",{class:"bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow duration-300 p-6 h-full border-l-4 border-indigo-500"},[e("div",{class:"flex flex-col items-center justify-center h-full text-center"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-16 w-16 text-indigo-500 mb-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),e("polyline",{points:"9 22 9 12 15 12 15 22"})]),e("h2",{class:"text-xl font-medium text-gray-900 mb-2"},"Sucursales"),e("p",{class:"text-gray-600 text-center"},"Gestión de múltiples locales")])],-1)])),_:1}),k(o,{to:"/preferences",class:"block"},{default:$(()=>t[17]||(t[17]=[e("div",{class:"bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow duration-300 p-6 h-full border-l-4 border-gray-500"},[e("div",{class:"flex flex-col items-center justify-center h-full text-center"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-16 w-16 text-gray-500 mb-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("circle",{cx:"12",cy:"12",r:"3"}),e("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"})]),e("h2",{class:"text-xl font-medium text-gray-900 mb-2"},"Preferencias"),e("p",{class:"text-gray-600 text-center"},"Personaliza tu sistema")])],-1)])),_:1})]),k(Ae,{modelValue:y.value,"onUpdate:modelValue":t[0]||(t[0]=a=>y.value=a),onOpened:v},null,8,["modelValue"]),k(Lt,{modelValue:j.value,"onUpdate:modelValue":t[1]||(t[1]=a=>j.value=a),shift:M(g).activeShift,onClosed:x},null,8,["modelValue","shift"])])}}};export{es as default};
