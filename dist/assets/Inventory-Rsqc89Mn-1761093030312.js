import{l as M,k as q,g as v,m as A,D as H,o as u,h as I,E as U,c as p,b as w,d as t,w as z,t as g,i as E,v as B,j as b,T as L,G as Q,p as R,y as G,e as l,a as K,s as F,f as J,F as W,r as X,n as T}from"./index-xqT8OUOU-1761093030312.js";import{_ as D}from"./_plugin-vue_export-helper-DlAUqK2U-1761093030312.js";const _={async getProducts(e={}){const r=new URLSearchParams;e.page&&r.append("page",e.page.toString()),e.limit&&r.append("limit",e.limit.toString()),e.search&&r.append("search",e.search),e.category_id&&r.append("category_id",e.category_id.toString()),e.brand_id&&r.append("brand_id",e.brand_id.toString()),e.published!==null&&e.published!==void 0&&r.append("published",e.published?"1":"0"),e.stock_status&&e.stock_status!=="all"&&r.append("stock_status",e.stock_status);const n=(await M.get(`/products?${r.toString()}`)).data;return Array.isArray(n)?{success:!0,data:n.map(i=>({id:i.id,sku:i.sku||"N/A",name:i.name,description:i.description||"",price:parseFloat(i.price||"0"),stock:parseInt(i.stock||"0"),min_stock:parseInt(i.min_stock||"5"),published:i.published||!1,featured:i.featured||!1,images:i.images||[],category:i.category||{name:"Sin categoría"},brand:i.brand||null,created_at:i.created_at||new Date().toISOString(),updated_at:i.updated_at||new Date().toISOString()})),meta:{page:e.page||1,limit:e.limit||20,total:n.length,totalPages:Math.ceil(n.length/(e.limit||20)),hasMore:n.length>=(e.limit||20)}}:{success:!1,data:[],meta:{page:1,limit:20,total:0,totalPages:0,hasMore:!1}}},async getProduct(e){var n;const r=await M.get(`/products/${e}`),s=((n=r.data)==null?void 0:n.data)||r.data;return s?{success:!0,data:{id:s.id,sku:s.sku||"N/A",name:s.name,description:s.description||"",price:parseFloat(s.price||"0"),stock:parseInt(s.stock||"0"),min_stock:parseInt(s.min_stock||"5"),published:s.published||!1,featured:s.featured||!1,images:s.images||[],category:s.category||{name:"Sin categoría"},brand:s.brand||null,created_at:s.created_at||new Date().toISOString(),updated_at:s.updated_at||new Date().toISOString()}}:{success:!1,data:null,message:"Producto no encontrado"}},async updateStock(e,r){return{success:!0,data:(await M.put(`/products/${e}`,{stock:parseInt(r)})).data}},async updatePrice(e,r){return{success:!0,data:(await M.put(`/products/${e}`,{price:parseFloat(r)})).data}},async quickUpdate(e,r){const s={};return r.price!==void 0&&r.price!==null&&(s.price=parseFloat(r.price)),r.stock!==void 0&&r.stock!==null&&(s.stock=parseInt(r.stock)),{success:!0,data:(await M.put(`/products/${e}`,s)).data,message:"Producto actualizado correctamente"}},async getStats(){const e=await this.getProducts({limit:1e4});if(!e.success)return{success:!1,data:null};const r=e.data,s=r.length,n=r.reduce((c,y)=>c+y.price*y.stock,0),i=r.filter(c=>c.stock>0&&c.stock<=c.min_stock).length,f=r.filter(c=>c.stock===0).length;return{success:!0,data:{total_products:s,total_inventory_value:n,low_stock_count:i,out_of_stock_count:f,in_stock_count:s-f}}}},Y=q("inventory",{state:()=>({products:[],currentProduct:null,filters:{search:"",category_id:null,brand_id:null,stock_status:"all",published:!0,page:1,limit:20},meta:{total:0,totalPages:0,hasMore:!1},stats:{total_products:0,total_inventory_value:0,low_stock_count:0,out_of_stock_count:0,in_stock_count:0},loading:!1,error:null}),getters:{lowStockProducts:e=>e.products.filter(r=>r.stock>0&&r.stock<=r.min_stock),outOfStockProducts:e=>e.products.filter(r=>r.stock===0),inStockProducts:e=>e.products.filter(r=>r.stock>r.min_stock),totalPages:e=>e.meta.totalPages,currentPage:e=>e.filters.page,hasMoreProducts:e=>e.meta.hasMore},actions:{async loadProducts(){this.loading=!0,this.error=null;try{const e=await _.getProducts(this.filters);e.success?(this.products=e.data,this.meta=e.meta):(this.error="Error al cargar productos",this.products=[])}catch(e){console.error("Error loading products:",e),this.error=e.message||"Error al cargar productos",this.products=[]}finally{this.loading=!1}},async loadProduct(e){this.loading=!0,this.error=null;try{const r=await _.getProduct(e);return r.success?(this.currentProduct=r.data,r.data):(this.error=r.message||"Producto no encontrado",this.currentProduct=null,null)}catch(r){return console.error("Error loading product:",r),this.error=r.message||"Error al cargar producto",this.currentProduct=null,null}finally{this.loading=!1}},async updateStock(e,r){try{if((await _.updateStock(e,r)).success){const n=this.products.findIndex(i=>i.id===e);return n!==-1&&(this.products[n].stock=r),this.currentProduct&&this.currentProduct.id===e&&(this.currentProduct.stock=r),{success:!0}}return{success:!1,message:"Error al actualizar stock"}}catch(s){return console.error("Error updating stock:",s),{success:!1,message:s.message||"Error al actualizar stock"}}},async updatePrice(e,r){try{if((await _.updatePrice(e,r)).success){const n=this.products.findIndex(i=>i.id===e);return n!==-1&&(this.products[n].price=r),this.currentProduct&&this.currentProduct.id===e&&(this.currentProduct.price=r),{success:!0}}return{success:!1,message:"Error al actualizar precio"}}catch(s){return console.error("Error updating price:",s),{success:!1,message:s.message||"Error al actualizar precio"}}},async quickUpdate(e,r){try{const s=await _.quickUpdate(e,r);if(s.success){const n=this.products.findIndex(i=>i.id===e);return n!==-1&&(r.price!==void 0&&(this.products[n].price=r.price),r.stock!==void 0&&(this.products[n].stock=r.stock)),this.currentProduct&&this.currentProduct.id===e&&(r.price!==void 0&&(this.currentProduct.price=r.price),r.stock!==void 0&&(this.currentProduct.stock=r.stock)),{success:!0,message:s.message}}return{success:!1,message:"Error al actualizar producto"}}catch(s){return console.error("Error in quick update:",s),{success:!1,message:s.message||"Error al actualizar producto"}}},async loadStats(){try{const e=await _.getStats();e.success&&(this.stats=e.data)}catch(e){console.error("Error loading stats:",e)}},setFilter(e,r){this.filters[e]=r,e!=="page"&&(this.filters.page=1)},resetFilters(){this.filters={search:"",category_id:null,brand_id:null,stock_status:"all",published:!0,page:1,limit:20}},setPage(e){this.filters.page=e},nextPage(){this.meta.hasMore&&this.filters.page++},prevPage(){this.filters.page>1&&this.filters.page--}}}),Z={class:"flex min-h-full items-center justify-center p-4"},tt={class:"border-b border-gray-200 bg-gray-50 px-6 py-4"},et={class:"mt-1 text-sm text-gray-500"},st=["value"],ot={class:"bg-blue-50 border border-blue-200 rounded-md p-3"},rt={class:"flex items-start"},it={class:"text-sm text-blue-700"},at={class:"font-medium"},nt={key:0,class:"mt-1 text-red-600 font-semibold"},lt={key:0,class:"bg-red-50 border border-red-200 rounded-md p-3"},dt={class:"text-sm text-red-700"},ct={class:"flex gap-3 pt-4"},ut=["disabled"],pt=["disabled"],mt={key:0},gt={key:1,class:"flex items-center justify-center"},ft={__name:"QuickEditModal",props:{isOpen:{type:Boolean,required:!0},product:{type:Object,default:null}},emits:["close","save"],setup(e,{emit:r}){const s=e,n=r,i=v({price:0,stock:0}),f=v(!1),c=v(null),y=v(null);A(()=>s.product,h=>{h&&(i.value={price:h.price||0,stock:h.stock||0},c.value=null)},{immediate:!0}),A(()=>s.isOpen,async h=>{var d,k;h&&(await R(),(d=y.value)==null||d.focus(),(k=y.value)==null||k.select())});const x=()=>{f.value||n("close")},j=async()=>{c.value=null,f.value=!0;try{if(i.value.price<0){c.value="El precio no puede ser negativo";return}if(i.value.stock<0){c.value="El stock no puede ser negativo";return}n("save",{productId:s.product.id,price:i.value.price,stock:i.value.stock})}catch(h){console.error("Error en handleSubmit:",h),c.value=h.message||"Error al guardar los cambios"}finally{f.value=!1}};return(h,d)=>(u(),H(Q,{to:"body"},[I(L,{name:"modal"},{default:U(()=>{var k,P,$,S;return[e.isOpen?(u(),p("div",{key:0,class:"fixed inset-0 z-50 overflow-y-auto",onClick:z(x,["self"])},[d[10]||(d[10]=t("div",{class:"fixed inset-0 bg-black bg-opacity-50 transition-opacity"},null,-1)),t("div",Z,[t("div",{class:"relative w-full max-w-md transform overflow-hidden rounded-lg bg-white shadow-xl transition-all",onClick:d[2]||(d[2]=z(()=>{},["stop"]))},[t("div",tt,[t("div",{class:"flex items-center justify-between"},[d[4]||(d[4]=t("h3",{class:"text-lg font-semibold text-gray-900"}," Edición Rápida ",-1)),t("button",{onClick:x,class:"text-gray-400 hover:text-gray-500 transition-colors"},d[3]||(d[3]=[t("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),t("p",et,g((k=e.product)==null?void 0:k.name),1)]),t("form",{onSubmit:z(j,["prevent"]),class:"px-6 py-4 space-y-4"},[t("div",null,[d[5]||(d[5]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," SKU ",-1)),t("input",{type:"text",value:(P=e.product)==null?void 0:P.sku,disabled:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50 text-gray-500 cursor-not-allowed"},null,8,st)]),t("div",null,[d[6]||(d[6]=t("label",{for:"price",class:"block text-sm font-medium text-gray-700 mb-1"}," Precio (S/) ",-1)),E(t("input",{id:"price",ref_key:"priceInput",ref:y,"onUpdate:modelValue":d[0]||(d[0]=C=>i.value.price=C),type:"number",step:"0.01",min:"0",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"0.00"},null,512),[[B,i.value.price,void 0,{number:!0}]])]),t("div",null,[d[7]||(d[7]=t("label",{for:"stock",class:"block text-sm font-medium text-gray-700 mb-1"}," Stock Actual ",-1)),E(t("input",{id:"stock","onUpdate:modelValue":d[1]||(d[1]=C=>i.value.stock=C),type:"number",min:"0",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"0"},null,512),[[B,i.value.stock,void 0,{number:!0}]])]),t("div",ot,[t("div",rt,[d[8]||(d[8]=t("svg",{class:"h-5 w-5 text-blue-400 mt-0.5 mr-2 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z","clip-rule":"evenodd"})],-1)),t("div",it,[t("p",at,"Stock mínimo: "+g((($=e.product)==null?void 0:$.min_stock)||5)+" unidades",1),i.value.stock<=(((S=e.product)==null?void 0:S.min_stock)||5)?(u(),p("p",nt," ⚠️ El stock está por debajo del mínimo ")):w("",!0)])])]),c.value?(u(),p("div",lt,[t("p",dt,g(c.value),1)])):w("",!0),t("div",ct,[t("button",{type:"button",onClick:x,class:"flex-1 px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-colors",disabled:f.value}," Cancelar ",8,ut),t("button",{type:"submit",class:"flex-1 px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:f.value},[f.value?(u(),p("span",gt,d[9]||(d[9]=[t("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),b(" Guardando... ")]))):(u(),p("span",mt,"Guardar Cambios"))],8,pt)])],32)])])])):w("",!0)]}),_:1})]))}},xt=D(ft,[["__scopeId","data-v-33a34079"]]),ht={class:"min-h-screen bg-gray-50"},yt={class:"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8"},vt={class:"mb-6"},kt={class:"flex items-center justify-between mb-4"},bt={class:"grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-4"},wt={class:"bg-white overflow-hidden shadow rounded-lg"},_t={class:"p-5"},Pt={class:"flex items-center"},St={class:"ml-5 w-0 flex-1"},Ct={class:"text-lg font-semibold text-gray-900"},Mt={class:"bg-white overflow-hidden shadow rounded-lg"},Et={class:"p-5"},$t={class:"flex items-center"},jt={class:"ml-5 w-0 flex-1"},zt={class:"text-lg font-semibold text-gray-900"},It={class:"bg-white overflow-hidden shadow rounded-lg"},Bt={class:"p-5"},Vt={class:"flex items-center"},At={class:"ml-5 w-0 flex-1"},Ft={class:"text-lg font-semibold text-gray-900"},Tt={class:"bg-white overflow-hidden shadow rounded-lg"},Ut={class:"p-5"},Lt={class:"flex items-center"},Dt={class:"ml-5 w-0 flex-1"},Nt={class:"text-lg font-semibold text-gray-900"},Ot={class:"bg-white shadow rounded-lg mb-6"},qt={class:"p-4 sm:p-6"},Ht={class:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4"},Qt={class:"bg-white shadow rounded-lg overflow-hidden"},Rt={key:0,class:"flex items-center justify-center py-12"},Gt={key:1,class:"text-center py-12"},Kt={key:2,class:"overflow-x-auto"},Jt={class:"min-w-full divide-y divide-gray-200"},Wt={class:"bg-white divide-y divide-gray-200"},Xt={class:"px-6 py-4 whitespace-nowrap"},Yt=["src","alt"],Zt={key:1,class:"h-10 w-10 rounded-md bg-gray-200 flex items-center justify-center"},te={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},ee={class:"px-6 py-4"},se={class:"text-sm font-medium text-gray-900"},oe={key:0,class:"text-sm text-gray-500 truncate max-w-xs"},re={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},ie={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},ae={class:"px-6 py-4 whitespace-nowrap"},ne={key:0},le={key:1},de={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},ce=["onClick"],ue={key:3,class:"bg-white px-4 py-3 border-t border-gray-200 sm:px-6"},pe={class:"flex items-center justify-between"},me={class:"flex-1 flex justify-between sm:hidden"},ge=["disabled"],fe=["disabled"],xe={class:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between"},he={class:"text-sm text-gray-700"},ye={class:"font-medium"},ve={class:"font-medium"},ke={class:"font-medium"},be={class:"flex gap-2"},we=["disabled"],_e=["disabled"],Pe={key:0,class:"fixed bottom-4 right-4 z-50 max-w-sm w-full bg-white shadow-lg rounded-lg pointer-events-auto ring-1 ring-black ring-opacity-5"},Se={class:"p-4"},Ce={class:"flex items-start"},Me={class:"flex-shrink-0"},Ee={key:0,class:"h-6 w-6 text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},$e={key:1,class:"h-6 w-6 text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},je={class:"ml-3 w-0 flex-1"},ze={class:"text-sm font-medium text-gray-900"},Ie={__name:"Inventory",setup(e){const r=K(),s=Y(),n=v(""),i=v(!1),f=v(null),c=v({show:!1,type:"success",message:""});let y=null;const x=async()=>{await s.loadProducts(),await s.loadStats()},j=()=>{y&&clearTimeout(y),y=setTimeout(()=>{s.setFilter("search",n.value),x()},500)},h=()=>{x()},d=()=>{n.value="",s.resetFilters(),x()},k=m=>{f.value=m,i.value=!0},P=()=>{i.value=!1,f.value=null},$=async m=>{const o=await s.quickUpdate(m.productId,{price:m.price,stock:m.stock});o.success?(S("success",o.message||"Producto actualizado correctamente"),P(),await x()):S("error",o.message||"Error al actualizar el producto")},S=(m,o)=>{c.value={show:!0,type:m,message:o},setTimeout(()=>{c.value.show=!1},3e3)},C=m=>new Intl.NumberFormat("es-PE",{style:"currency",currency:"PEN"}).format(m),N=m=>m.stock===0?"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800":m.stock<=m.min_stock?"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-yellow-100 text-yellow-800":"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",O=m=>m.stock===0?"bg-red-50":m.stock<=m.min_stock?"bg-yellow-50":"";return G(()=>{x()}),(m,o)=>(u(),p("div",ht,[t("div",yt,[t("div",vt,[t("div",kt,[o[9]||(o[9]=t("div",null,[t("h1",{class:"text-3xl font-bold text-gray-900"},"Inventario"),t("p",{class:"mt-1 text-sm text-gray-500"}," Gestión de productos y stock ")],-1)),t("button",{onClick:o[0]||(o[0]=a=>l(r).push("/menu")),class:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"},o[8]||(o[8]=[t("svg",{class:"h-5 w-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1),b(" Volver al Menú ")]))]),t("div",bt,[t("div",wt,[t("div",_t,[t("div",Pt,[o[11]||(o[11]=t("div",{class:"flex-shrink-0"},[t("svg",{class:"h-6 w-6 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})])],-1)),t("div",St,[t("dl",null,[o[10]||(o[10]=t("dt",{class:"text-sm font-medium text-gray-500 truncate"}," Total Productos ",-1)),t("dd",Ct,g(l(s).stats.total_products),1)])])])])]),t("div",Mt,[t("div",Et,[t("div",$t,[o[13]||(o[13]=t("div",{class:"flex-shrink-0"},[t("svg",{class:"h-6 w-6 text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),t("div",jt,[t("dl",null,[o[12]||(o[12]=t("dt",{class:"text-sm font-medium text-gray-500 truncate"}," En Stock ",-1)),t("dd",zt,g(l(s).stats.in_stock_count),1)])])])])]),t("div",It,[t("div",Bt,[t("div",Vt,[o[15]||(o[15]=t("div",{class:"flex-shrink-0"},[t("svg",{class:"h-6 w-6 text-yellow-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})])],-1)),t("div",At,[t("dl",null,[o[14]||(o[14]=t("dt",{class:"text-sm font-medium text-gray-500 truncate"}," Stock Bajo ",-1)),t("dd",Ft,g(l(s).stats.low_stock_count),1)])])])])]),t("div",Tt,[t("div",Ut,[t("div",Lt,[o[17]||(o[17]=t("div",{class:"flex-shrink-0"},[t("svg",{class:"h-6 w-6 text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})])],-1)),t("div",Dt,[t("dl",null,[o[16]||(o[16]=t("dt",{class:"text-sm font-medium text-gray-500 truncate"}," Sin Stock ",-1)),t("dd",Nt,g(l(s).stats.out_of_stock_count),1)])])])])])])]),t("div",Ot,[t("div",qt,[t("div",Ht,[t("div",null,[o[18]||(o[18]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Buscar",-1)),E(t("input",{"onUpdate:modelValue":o[1]||(o[1]=a=>n.value=a),onInput:j,type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Nombre o SKU..."},null,544),[[B,n.value]])]),t("div",null,[o[20]||(o[20]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Estado de Stock",-1)),E(t("select",{"onUpdate:modelValue":o[2]||(o[2]=a=>l(s).filters.stock_status=a),onChange:h,class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500"},o[19]||(o[19]=[t("option",{value:"all"},"Todos",-1),t("option",{value:"in_stock"},"En Stock",-1),t("option",{value:"low_stock"},"Stock Bajo",-1),t("option",{value:"out_of_stock"},"Sin Stock",-1)]),544),[[F,l(s).filters.stock_status]])]),t("div",null,[o[22]||(o[22]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Por página",-1)),E(t("select",{"onUpdate:modelValue":o[3]||(o[3]=a=>l(s).filters.limit=a),onChange:h,class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500"},o[21]||(o[21]=[t("option",{value:10},"10",-1),t("option",{value:20},"20",-1),t("option",{value:50},"50",-1),t("option",{value:100},"100",-1)]),544),[[F,l(s).filters.limit]])]),t("div",{class:"flex items-end"},[t("button",{onClick:d,class:"w-full px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"}," Limpiar Filtros ")])])])]),t("div",Qt,[l(s).loading?(u(),p("div",Rt,o[23]||(o[23]=[J('<div class="text-center" data-v-c58f20ff><svg class="animate-spin h-8 w-8 text-indigo-600 mx-auto mb-4" fill="none" viewBox="0 0 24 24" data-v-c58f20ff><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4" data-v-c58f20ff></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z" data-v-c58f20ff></path></svg><p class="text-gray-500" data-v-c58f20ff>Cargando productos...</p></div>',1)]))):l(s).products.length===0?(u(),p("div",Gt,o[24]||(o[24]=[t("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})],-1),t("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"No hay productos",-1),t("p",{class:"mt-1 text-sm text-gray-500"},"Los productos se gestionan desde el Admin Panel",-1)]))):(u(),p("div",Kt,[t("table",Jt,[o[26]||(o[26]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Imagen "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," SKU "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Producto "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Categoría "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Precio "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Stock "),t("th",{scope:"col",class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"}," Acciones ")])],-1)),t("tbody",Wt,[(u(!0),p(W,null,X(l(s).products,a=>{var V;return u(),p("tr",{key:a.id,class:T(O(a))},[t("td",Xt,[a.images&&a.images.length>0?(u(),p("img",{key:0,src:a.images[0].url||a.images[0],alt:a.name,class:"h-10 w-10 rounded-md object-cover"},null,8,Yt)):(u(),p("div",Zt,o[25]||(o[25]=[t("svg",{class:"h-6 w-6 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)])))]),t("td",te,g(a.sku),1),t("td",ee,[t("div",se,g(a.name),1),a.description?(u(),p("div",oe,g(a.description),1)):w("",!0)]),t("td",re,g(((V=a.category)==null?void 0:V.name)||"Sin categoría"),1),t("td",ie,g(C(a.price)),1),t("td",ae,[t("span",{class:T(N(a))},[b(g(a.stock)+" ",1),a.stock===0?(u(),p("span",ne," (Agotado)")):a.stock<=a.min_stock?(u(),p("span",le," (Bajo)")):w("",!0)],2)]),t("td",de,[t("button",{onClick:Be=>k(a),class:"text-indigo-600 hover:text-indigo-900 transition-colors"}," Editar Rápido ",8,ce)])],2)}),128))])])])),!l(s).loading&&l(s).products.length>0?(u(),p("div",ue,[t("div",pe,[t("div",me,[t("button",{onClick:o[4]||(o[4]=a=>{l(s).prevPage(),x()}),disabled:l(s).currentPage===1,class:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"}," Anterior ",8,ge),t("button",{onClick:o[5]||(o[5]=a=>{l(s).nextPage(),x()}),disabled:!l(s).hasMoreProducts,class:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"}," Siguiente ",8,fe)]),t("div",xe,[t("div",null,[t("p",he,[o[27]||(o[27]=b(" Mostrando ")),t("span",ye,g((l(s).currentPage-1)*l(s).filters.limit+1),1),o[28]||(o[28]=b(" - ")),t("span",ve,g(Math.min(l(s).currentPage*l(s).filters.limit,l(s).meta.total)),1),o[29]||(o[29]=b(" de ")),t("span",ke,g(l(s).meta.total),1),o[30]||(o[30]=b(" productos "))])]),t("div",be,[t("button",{onClick:o[6]||(o[6]=a=>{l(s).prevPage(),x()}),disabled:l(s).currentPage===1,class:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"}," Anterior ",8,we),t("button",{onClick:o[7]||(o[7]=a=>{l(s).nextPage(),x()}),disabled:!l(s).hasMoreProducts,class:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"}," Siguiente ",8,_e)])])])])):w("",!0)])]),I(xt,{"is-open":i.value,product:f.value,onClose:P,onSave:$},null,8,["is-open","product"]),I(L,{name:"toast"},{default:U(()=>[c.value.show?(u(),p("div",Pe,[t("div",Se,[t("div",Ce,[t("div",Me,[c.value.type==="success"?(u(),p("svg",Ee,o[31]||(o[31]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)]))):(u(),p("svg",$e,o[32]||(o[32]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)])))]),t("div",je,[t("p",ze,g(c.value.message),1)])])])])):w("",!0)]),_:1})]))}},Fe=D(Ie,[["__scopeId","data-v-c58f20ff"]]);export{Fe as default};
