import{u as _,a as C,c as s,b as c,o,d as e,e as n,F as S,r as V,n as h,t as p,f as j,g as f,h as B,w as $,i as b,v as k,j as M}from"./index-xqT8OUOU-1761093030312.js";const q="/assets/logo-mitiendapos-wb-CWArhxlr-1761093030312.svg",z={key:0,class:"fixed inset-0 z-50 overflow-y-auto"},E={class:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},L={class:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-2xl sm:w-full"},N={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},A={class:"sm:flex sm:items-start"},I={class:"w-full"},T={class:"flex justify-between items-center mb-4"},H={key:0,class:"text-center py-8"},U={key:1,class:"space-y-3"},D=["onClick"],F={class:"flex items-center gap-4"},P={class:"w-16 h-16 bg-blue-100 rounded-lg flex items-center justify-center flex-shrink-0"},O={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-8 w-8 text-blue-600",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},R=["src","alt"],W={class:"flex-1 min-w-0"},G={class:"font-semibold text-lg text-gray-900 truncate"},J={class:"text-sm text-gray-500 truncate"},K={class:"flex gap-2 mt-1"},Q={key:0,class:"text-xs px-2 py-1 bg-blue-100 text-blue-800 rounded"},X={class:"flex-shrink-0"},Y={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 text-green-600",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},Z={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 text-gray-400",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},ee={key:0,class:"bg-red-50 border border-red-200 rounded-lg p-3"},te={class:"text-sm text-red-700"},se={key:1,class:"text-center py-8"},oe={class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},le={__name:"StoreSelector",props:{modelValue:{type:Boolean,default:!1},required:{type:Boolean,default:!1}},emits:["update:modelValue","store-selected"],setup(u,{emit:a}){const m=u,g=a,i=_(),y=C(),x=async d=>{try{await i.selectStore(d.id),g("store-selected",d),m.required?y.push("/menu"):l()}catch(t){console.error("Error selecting store:",t),alert("Error al seleccionar la tienda. Por favor, intenta nuevamente.")}},l=()=>{m.required||g("update:modelValue",!1)};return(d,t)=>u.modelValue?(o(),s("div",z,[e("div",E,[t[8]||(t[8]=e("div",{class:"fixed inset-0 transition-opacity","aria-hidden":"true"},[e("div",{class:"absolute inset-0 bg-gray-500 opacity-75"})],-1)),t[9]||(t[9]=e("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"},"​",-1)),e("div",L,[e("div",N,[e("div",A,[e("div",I,[e("div",T,[t[2]||(t[2]=e("div",null,[e("h3",{class:"text-lg leading-6 font-medium text-gray-900"},"Selecciona tu Tienda"),e("p",{class:"text-sm text-gray-500 mt-1"},"Elige la tienda con la que deseas trabajar")],-1)),u.required?c("",!0):(o(),s("button",{key:0,onClick:l,class:"text-gray-400 hover:text-gray-500 focus:outline-none"},t[1]||(t[1]=[e("svg",{class:"h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])))]),n(i).loading?(o(),s("div",H,t[3]||(t[3]=[e("svg",{class:"animate-spin h-10 w-10 mx-auto text-blue-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),e("p",{class:"text-gray-600 mt-2"},"Cargando tiendas...",-1)]))):(o(),s("div",U,[(o(!0),s(S,null,V(n(i).stores,r=>{var v,w;return o(),s("div",{key:r.id,onClick:pe=>x(r),class:h(["border rounded-lg p-4 cursor-pointer hover:shadow-md transition-shadow",((v=n(i).selectedStore)==null?void 0:v.id)===r.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-blue-300"])},[e("div",F,[e("div",P,[r.logo?(o(),s("img",{key:1,src:r.logo,alt:r.name,class:"w-full h-full object-cover rounded-lg"},null,8,R)):(o(),s("svg",O,t[4]||(t[4]=[e("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"},null,-1),e("polyline",{points:"9 22 9 12 15 12 15 22"},null,-1)])))]),e("div",W,[e("h3",G,p(r.name),1),e("p",J,p(r.url||r.slug),1),e("div",K,[r.plan?(o(),s("span",Q,p(r.plan),1)):c("",!0),e("span",{class:h(["text-xs px-2 py-1 rounded",r.status==="active"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"])},p(r.status==="active"?"Activa":"Inactiva"),3)])]),e("div",X,[((w=n(i).selectedStore)==null?void 0:w.id)===r.id?(o(),s("svg",Y,t[5]||(t[5]=[e("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"},null,-1),e("polyline",{points:"22 4 12 14.01 9 11.01"},null,-1)]))):(o(),s("svg",Z,t[6]||(t[6]=[e("polyline",{points:"9 18 15 12 9 6"},null,-1)])))])])],10,D)}),128)),n(i).error?(o(),s("div",ee,[e("p",te,p(n(i).error),1)])):c("",!0),n(i).stores.length===0?(o(),s("div",se,t[7]||(t[7]=[j('<svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12 mx-auto text-gray-400 mb-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="12"></line><line x1="12" y1="16" x2="12.01" y2="16"></line></svg><p class="text-gray-500">No tienes tiendas disponibles</p>',2)]))):c("",!0)]))])])]),e("div",oe,[u.required?c("",!0):(o(),s("button",{key:0,onClick:l,class:"mt-3 sm:mt-0 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none sm:w-auto sm:text-sm"}," Cancelar ")),u.required&&n(i).stores.length>0?(o(),s("button",{key:1,onClick:t[0]||(t[0]=r=>n(i).logout()),class:"mt-3 sm:mt-0 sm:mr-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none sm:w-auto sm:text-sm"}," Cerrar Sesión ")):c("",!0)])])])])):c("",!0)}},re={class:"min-h-screen bg-gray-100 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8"},ne={class:"max-w-md w-full space-y-8"},ie={class:"rounded-md shadow-sm -space-y-px"},ae=["disabled"],de=["disabled"],ce={key:0,class:"text-red-600 text-sm text-center"},ue=["disabled"],me={key:0},ge={key:1},ye={__name:"Login",setup(u){const a=_(),m=f(""),g=f(""),i=f(!1),y=async()=>{try{await a.login(m.value,g.value),a.hasMultipleStores&&!a.selectedStore&&(i.value=!0)}catch(x){console.error("Login error:",x)}};return(x,l)=>(o(),s("div",re,[e("div",ne,[l[6]||(l[6]=e("div",null,[e("div",{class:"flex justify-center"},[e("img",{src:q,alt:"MiTiendaPOS Logo",class:"h-12"})]),e("h2",{class:"mt-4 text-center text-2xl font-extrabold text-gray-900"}," Iniciar Sesión ")],-1)),e("form",{class:"mt-8 space-y-6",onSubmit:$(y,["prevent"])},[e("div",ie,[e("div",null,[l[3]||(l[3]=e("label",{for:"email",class:"sr-only"},"Email",-1)),b(e("input",{id:"email","onUpdate:modelValue":l[0]||(l[0]=d=>m.value=d),name:"email",type:"email",required:"",class:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"Email",disabled:n(a).loading},null,8,ae),[[k,m.value]])]),e("div",null,[l[4]||(l[4]=e("label",{for:"password",class:"sr-only"},"Contraseña",-1)),b(e("input",{id:"password","onUpdate:modelValue":l[1]||(l[1]=d=>g.value=d),name:"password",type:"password",required:"",class:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"Contraseña",disabled:n(a).loading},null,8,de),[[k,g.value]])])]),n(a).error?(o(),s("div",ce,p(n(a).error),1)):c("",!0),e("div",null,[e("button",{type:"submit",disabled:n(a).loading,class:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50"},[n(a).loading?(o(),s("span",me,l[5]||(l[5]=[e("svg",{class:"animate-spin h-5 w-5 mr-3",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4",fill:"none"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),M(" Iniciando sesión... ")]))):(o(),s("span",ge,"Iniciar Sesión"))],8,ue)])],32)]),B(le,{modelValue:i.value,"onUpdate:modelValue":l[2]||(l[2]=d=>i.value=d),required:!0},null,8,["modelValue"])]))}};export{ye as default};
