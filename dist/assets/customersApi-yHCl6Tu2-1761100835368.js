import{l as d}from"./index-Drmr0K2a-1761100835368.js";const u={async getCustomers(e={}){var r,a;try{const o=new URLSearchParams;e.page&&o.append("page",e.page),e.limit&&o.append("limit",e.limit),e.search&&o.append("search",e.search),e.verified!==void 0&&o.append("verified",e.verified?"1":"0"),e.blocked!==void 0&&o.append("blocked",e.blocked?"1":"0"),e.date_from&&o.append("date_from",e.date_from),e.date_to&&o.append("date_to",e.date_to);const s=o.toString(),t=s?`/customers?${s}`:"/customers",c=await d.get(t);return{success:!0,data:c.data.data||[],pagination:c.data.pagination||null}}catch(o){return console.error("Error fetching customers:",o),{success:!1,error:((a=(r=o.response)==null?void 0:r.data)==null?void 0:a.message)||o.message||"Error fetching customers"}}},async getCustomer(e){var r,a;try{const o=await d.get(`/customers/${e}`);return{success:!0,data:o.data.data||o.data}}catch(o){return console.error("Error fetching customer:",o),{success:!1,error:((a=(r=o.response)==null?void 0:r.data)==null?void 0:a.message)||o.message||"Error fetching customer"}}},async searchByDocument(e,r=null){var a,o,s;try{const t=new URLSearchParams;t.append("document_number",e),r&&t.append("document_type",r),console.log("üîé API: Searching customer by document:",e,"type:",r);const c=await d.get(`/customers/search-by-document?${t.toString()}`);return console.log("üì¶ API: searchByDocument response:",c.data),c.data.found?(console.log("‚úÖ API: Customer found:",c.data.data),console.log("üë§ API: Customer name:",(a=c.data.data)==null?void 0:a.name)):console.log("‚ùå API: Customer NOT found in database"),{success:c.data.success,found:c.data.found,data:c.data.data||null}}catch(t){return console.error("Error searching customer by document:",t),{success:!1,found:!1,error:((s=(o=t.response)==null?void 0:o.data)==null?void 0:s.message)||t.message||"Error searching customer"}}},async lookupDocument(e,r="dni"){var a,o,s,t,c;try{console.log(`üîé Calling Decolecta API: /customers/lookup/${e}?type=${r.toLowerCase()}`);const n=await d.get(`/customers/lookup/${e}?type=${r.toLowerCase()}`);return console.log("üì¶ Decolecta API response:",n.data),console.log("üìã Decolecta data object:",n.data.data),r.toLowerCase()==="ruc"&&(console.log("üè¢ RUC Fields analysis:"),console.log("   - razonSocial:",(a=n.data.data)==null?void 0:a.razonSocial),console.log("   - nombre:",(o=n.data.data)==null?void 0:o.nombre),console.log("   - All field keys:",Object.keys(n.data.data||{})),console.log("   - Full data:",JSON.stringify(n.data.data,null,2))),{success:n.data.success,type:n.data.type,documentNumber:n.data.document_number,data:n.data.data}}catch(n){return console.error("Error looking up document:",n),console.error("Error details:",(s=n.response)==null?void 0:s.data),{success:!1,error:((c=(t=n.response)==null?void 0:t.data)==null?void 0:c.message)||n.message||"Error looking up document"}}},async createCustomer(e){var r,a;try{const o={tiendacliente_nombres:e.nombres||e.firstName||"",tiendacliente_apellidos:e.apellidos||e.lastName||"",tiendacliente_correo_electronico:e.email||e.correoElectronico||"",tiendacliente_telefono:e.telefono||e.phone||"",tiendacliente_numerodocumento:e.numeroDocumento||e.documentNumber||"",documento_id:e.tipoDocumento||e.documentType||"1",password:e.password||Math.random().toString(36).slice(-12)};e.razonSocial&&(o.tiendacliente_nombres=e.razonSocial,o.tiendacliente_apellidos="");const s=await d.post("/customers",o);console.log("Backend response:",s.data);const t=s.data.data||s.data;return console.log("Extracted customer data:",t),{success:!0,data:t}}catch(o){return console.error("Error creating customer:",o),{success:!1,error:((a=(r=o.response)==null?void 0:r.data)==null?void 0:a.message)||o.message||"Error creating customer"}}},async updateCustomer(e,r){var a,o;try{const s=await d.put(`/customers/${e}`,r);return{success:!0,data:s.data.data||s.data}}catch(s){return console.error("Error updating customer:",s),{success:!1,error:((o=(a=s.response)==null?void 0:a.data)==null?void 0:o.message)||s.message||"Error updating customer"}}},async deleteCustomer(e){var r,a;try{return{success:!0,data:(await d.delete(`/customers/${e}`)).data}}catch(o){return console.error("Error deleting customer:",o),{success:!1,error:((a=(r=o.response)==null?void 0:r.data)==null?void 0:a.message)||o.message||"Error deleting customer"}}}};export{u as c};
