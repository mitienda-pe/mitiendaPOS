const p={bills:[200,100,50,20,10],coins:[5,2,1,.5,.2,.1],all:[200,100,50,20,10,5,2,1,.5,.2,.1]};function d(o){return Math.round(o*10)/10}function h(o){const t=d(o);if(t<=0)return{possible:!0,breakdown:[],total:0};const a=[];let r=Math.round(t*100);for(const i of p.all){const n=Math.round(i*100),e=Math.floor(r/n);e>0&&(a.push({value:i,count:e,total:e*i}),r-=e*n)}const c=r===0,s=a.reduce((i,n)=>i+n.total,0);return{possible:c,breakdown:a,total:d(s)}}function f(o){const t=d(o),a=[];a.push({amount:t,change:0,description:"Pago exacto (sin vuelto)",priority:1,optimal:!0});const r=p.all.filter(n=>n>=t);return r.length>0&&r.slice(0,3).forEach((n,e)=>{const l=d(n-t),u=h(l);a.push({amount:n,change:l,description:`Con ${g(n)}`,priority:2+e,optimal:u.breakdown.length<=2,changeBreakdown:u})}),m(t).forEach((n,e)=>{const l=d(n.amount-t),u=h(l);a.push({amount:n.amount,change:l,description:n.description,priority:5+e,optimal:u.breakdown.length<=1,changeBreakdown:u})}),[5,10,20,50,100].forEach(n=>{const e=Math.ceil(t/n)*n;if(e>t&&e<=t+50){const l=d(e-t),u=h(l);a.push({amount:e,change:l,description:`Redondeo a S/ ${e}`,priority:10,optimal:u.breakdown.length<=2,changeBreakdown:u})}}),Array.from(new Map(a.map(n=>[n.amount,n])).values()).sort((n,e)=>n.priority-e.priority).slice(0,6)}function m(o){const t=[];return[[20,10],[20,5],[20,2],[20,1],[50,10],[50,5],[50,2],[100,20],[100,10],[100,5],[10,5],[10,2],[10,1],[5,2],[5,1]].forEach(([r,c])=>{const s=r+c;s>o&&s<=o+30&&t.push({amount:s,description:`Con ${g(r)} + ${g(c)}`})}),t}function g(o){return o>=10?`S/ ${o}`:o>=1?`S/ ${o}`:`S/ ${o.toFixed(2)}`}function w(o,t){const a=[],r=[];o<t&&a.push("El monto entregado es menor al total a pagar");const c=d(o);Math.abs(o-c)>.01&&r.push(`El monto se redondearÃ¡ a S/ ${c.toFixed(2)}`);const s=d(o-t);if(s>0){const i=h(s);i.possible?i.breakdown.length>5&&r.push(`El vuelto requiere ${i.breakdown.length} billetes/monedas`):a.push("No es posible dar vuelto exacto con las denominaciones disponibles")}return{valid:a.length===0,errors:a,warnings:r,change:s,changeBreakdown:s>0?h(s):null}}export{p as D,h as c,d as r,f as s,w as v};
