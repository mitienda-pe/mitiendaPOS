import{q as $,c as i,o as d,d as e,t as n,F as L,r as U,e as M,b as _,n as V,g as h,m as z,p as H,f as G,i as I,v as E,x as q,h as y,j as D,A as Z,u as K,y as J,E as C,H as Y}from"./index-Drmr0K2a-1761100835368.js";import{D as P}from"./cashDenominations-Cv48tYhz-1761100835368.js";const Q={class:"p-3 border border-gray-300 rounded-lg bg-gray-50"},W={class:"text-sm font-medium text-gray-700 mb-3"},X={class:"mb-3"},ee={class:"grid grid-cols-1 gap-2"},te={class:"text-xs font-medium text-gray-700 min-w-[60px]"},se=["value","onInput"],oe={class:"text-xs text-gray-500 min-w-[70px] text-right"},le={class:"grid grid-cols-1 gap-2"},ne={class:"text-xs font-medium text-gray-700 min-w-[60px]"},ae=["value","onInput"],re={class:"text-xs text-gray-500 min-w-[70px] text-right"},ie={class:"mt-3 pt-3 border-t border-gray-300"},de={class:"flex justify-between items-center"},ue={class:"text-sm font-medium text-gray-700"},ce={class:"text-lg font-bold text-gray-900"},me={class:"flex items-center justify-between text-sm"},R={__name:"CashBreakdownInput",props:{modelValue:{type:Object,default:()=>({})},expectedAmount:{type:Number,default:null},title:{type:String,default:"Arqueo - Conteo de denominaciones"},totalLabel:{type:String,default:"Total contado"}},emits:["update:modelValue","update:total"],setup(x,{emit:g}){const w=x,k=g,u=$(()=>w.modelValue),b=$(()=>{let m=0;for(const[t,o]of Object.entries(u.value))m+=parseFloat(t)*parseInt(o||0);return Math.round(m*100)/100}),p=$(()=>w.expectedAmount===null?0:Math.round((b.value-w.expectedAmount)*100)/100),f=$(()=>w.expectedAmount===null?!0:Math.abs(p.value)<.01),v=(m,t)=>{const o={...u.value};let a=parseInt(t)||0;a<0&&(a=0),a>999&&(a=999),o[m]=a,k("update:modelValue",o),k("update:total",b.value)};return(m,t)=>(d(),i("div",Q,[e("h4",W,n(x.title),1),e("div",X,[t[0]||(t[0]=e("h5",{class:"text-xs font-medium text-gray-600 mb-2 uppercase"},"Billetes",-1)),e("div",ee,[(d(!0),i(L,null,U(M(P).bills,o=>(d(),i("div",{key:o,class:"flex items-center justify-between gap-2"},[e("label",te,"S/ "+n(o),1),e("input",{type:"number",value:u.value[o]||0,onInput:a=>v(o,a.target.value),min:"0",max:"999",step:"1",placeholder:"0",class:"w-14 px-1 py-1 text-sm text-center border rounded focus:ring-1 focus:ring-blue-500"},null,40,se),e("span",oe," S/ "+n((o*(u.value[o]||0)).toFixed(2)),1)]))),128))])]),e("div",null,[t[1]||(t[1]=e("h5",{class:"text-xs font-medium text-gray-600 mb-2 uppercase"},"Monedas",-1)),e("div",le,[(d(!0),i(L,null,U(M(P).coins,o=>(d(),i("div",{key:o,class:"flex items-center justify-between gap-2"},[e("label",ne,"S/ "+n(o.toFixed(2)),1),e("input",{type:"number",value:u.value[o]||0,onInput:a=>v(o,a.target.value),min:"0",max:"999",step:"1",placeholder:"0",class:"w-14 px-1 py-1 text-sm text-center border rounded focus:ring-1 focus:ring-blue-500"},null,40,ae),e("span",re," S/ "+n((o*(u.value[o]||0)).toFixed(2)),1)]))),128))])]),e("div",ie,[e("div",de,[e("span",ue,n(x.totalLabel)+":",1),e("span",ce,"S/ "+n(b.value.toFixed(2)),1)]),x.expectedAmount!==null&&Math.abs(p.value)>.01?(d(),i("div",{key:0,class:V(["mt-2 p-2 rounded",f.value?"bg-green-50":"bg-red-50"])},[e("div",me,[e("span",{class:V(f.value?"text-green-700":"text-red-700")},n(f.value?"✓ Coincide":"✗ No coincide"),3),e("span",{class:V(f.value?"text-green-700 font-medium":"text-red-700 font-medium")},n(p.value>0?"Sobrante":"Faltante")+": S/ "+n(Math.abs(p.value).toFixed(2)),3)])],2)):_("",!0)])]))}},xe={key:0,class:"fixed inset-0 z-50 overflow-y-auto"},fe={class:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},ve={class:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full"},pe={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},be={class:"sm:flex sm:items-start"},he={class:"mt-3 text-center sm:mt-0 sm:text-left w-full"},ge={class:"mt-2"},we={class:"mb-4"},ye={class:"mb-4"},ke={class:"flex justify-between items-center mb-2"},_e={class:"relative"},je=["readonly"],Ce={key:0,class:"text-xs text-gray-500 mt-1"},$e={key:0,class:"mb-4"},Me={class:"mb-4"},Ve={key:1,class:"bg-red-50 border border-red-200 rounded-lg p-3 mb-4"},Se={class:"text-sm text-red-700"},Ae={class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse gap-2"},Be=["disabled"],Ie={key:0,class:"animate-spin -ml-1 mr-2 h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24"},Ee=["disabled"],Te={__name:"OpenShiftModal",props:{modelValue:Boolean},emits:["update:modelValue","opened"],setup(x,{emit:g}){const w=x,k=g,u=h(""),b=h(0),p=h(""),f=h(!1),v=h(null),m=h(null),t=h(null),o=h(!1),a=h({200:0,100:0,50:0,20:0,10:0,5:0,2:0,1:0,.5:0,.2:0,.1:0}),j=$(()=>{let r=0;for(const[l,c]of Object.entries(a.value))r+=parseFloat(l)*parseInt(c||0);return Math.round(r*100)/100}),T=$(()=>o.value?Math.round((b.value-j.value)*100)/100:0),O=$(()=>o.value?Math.abs(T.value)<.01:!0),A=$(()=>!(b.value<0||o.value&&!O.value));z(()=>w.modelValue,r=>{r&&(H(()=>{var l;(l=m.value)==null||l.focus()}),u.value="",b.value=0,p.value="",v.value=null,o.value=!1,Object.keys(a.value).forEach(l=>{a.value[l]=0}))}),z(j,r=>{o.value&&r>0&&(b.value=r)});const F=r=>{b.value=r},B=async()=>{if(!(!A.value||f.value)){v.value=null,f.value=!0;try{const r={cajaNumero:u.value.trim()||null,montoInicial:parseFloat(b.value),notas:p.value.trim()};o.value&&(r.breakdown={...a.value}),k("opened",r)}catch(r){v.value=r.message||"Error al abrir el turno"}finally{f.value=!1}}},N=()=>{f.value||k("update:modelValue",!1)};return(r,l)=>x.modelValue?(d(),i("div",xe,[e("div",fe,[l[14]||(l[14]=e("div",{class:"fixed inset-0 transition-opacity","aria-hidden":"true"},[e("div",{class:"absolute inset-0 bg-gray-500 opacity-75"})],-1)),l[15]||(l[15]=e("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"},"​",-1)),e("div",ve,[e("div",pe,[e("div",be,[e("div",he,[l[12]||(l[12]=e("h3",{class:"text-lg leading-6 font-medium text-gray-900 mb-4"}," Abrir Turno de Caja ",-1)),e("div",ge,[l[10]||(l[10]=e("p",{class:"text-sm text-gray-500 mb-4"}," Ingrese el monto inicial en efectivo que tiene en caja para iniciar el turno. ",-1)),e("div",we,[l[5]||(l[5]=e("label",{for:"caja-numero",class:"block text-sm font-medium text-gray-700 mb-2"}," Número de Caja (Opcional) ",-1)),I(e("input",{id:"caja-numero",ref_key:"cajaInput",ref:m,"onUpdate:modelValue":l[0]||(l[0]=c=>u.value=c),type:"text",placeholder:"Ej: CAJA-01, POS-LIMA-01",maxlength:"50",class:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-blue-500"},null,512),[[E,u.value]]),l[6]||(l[6]=e("p",{class:"text-xs text-gray-500 mt-1"}," Deje en blanco si solo tiene una caja. Use identificadores como CAJA-01, POS-LIMA-01 para múltiples cajas. ",-1))]),e("div",ye,[e("div",ke,[l[7]||(l[7]=e("label",{for:"monto-inicial",class:"block text-sm font-medium text-gray-700"}," Monto Inicial en Efectivo * ",-1)),e("button",{type:"button",onClick:l[1]||(l[1]=c=>o.value=!o.value),class:"text-xs text-blue-600 hover:text-blue-800 underline"},n(o.value?"Ocultar":"Desglosar")+" denominaciones ",1)]),e("div",_e,[l[8]||(l[8]=e("span",{class:"absolute left-3 top-2 text-gray-500"},"S/",-1)),I(e("input",{id:"monto-inicial",ref_key:"montoInput",ref:t,"onUpdate:modelValue":l[2]||(l[2]=c=>b.value=c),type:"number",step:"0.01",min:"0",placeholder:"0.00",readonly:o.value,class:V(["pl-10 w-full p-2 border rounded-lg focus:ring-2 focus:ring-blue-500",o.value?"bg-gray-100 cursor-not-allowed":""]),onKeyup:q(B,["enter"])},null,42,je),[[E,b.value]])]),o.value?(d(),i("p",Ce," El monto se calcula automáticamente del desglose ")):_("",!0)]),o.value?(d(),i("div",$e,[y(R,{modelValue:a.value,"onUpdate:modelValue":l[3]||(l[3]=c=>a.value=c),title:"Arqueo - Conteo de denominaciones","total-label":"Total contado","onUpdate:total":F},null,8,["modelValue"])])):_("",!0),e("div",Me,[l[9]||(l[9]=e("label",{for:"notas",class:"block text-sm font-medium text-gray-700 mb-2"}," Notas (Opcional) ",-1)),I(e("textarea",{id:"notas","onUpdate:modelValue":l[4]||(l[4]=c=>p.value=c),rows:"3",placeholder:"Ej: Billetes de S/ 100 x 5, Monedas de S/ 1 x 20...",class:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-blue-500"},null,512),[[E,p.value]])]),l[11]||(l[11]=G('<div class="bg-blue-50 border border-blue-200 rounded-lg p-3 mb-4"><div class="flex"><svg class="h-5 w-5 text-blue-400 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><div class="text-sm text-blue-700"><p class="font-medium">Importante:</p><p class="mt-1">El monto inicial debe coincidir con el efectivo real que tiene en caja. Este será el punto de partida para el arqueo al cierre del turno.</p></div></div></div>',1)),v.value?(d(),i("div",Ve,[e("p",Se,n(v.value),1)])):_("",!0)])])])]),e("div",Ae,[e("button",{onClick:B,disabled:f.value||!A.value,class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-green-600 text-base font-medium text-white hover:bg-green-700 focus:outline-none sm:w-auto sm:text-sm disabled:opacity-50 disabled:cursor-not-allowed"},[f.value?(d(),i("svg",Ie,l[13]||(l[13]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):_("",!0),D(" "+n(f.value?"Abriendo...":"Abrir Turno"),1)],8,Be),e("button",{onClick:N,disabled:f.value,class:"mt-3 sm:mt-0 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none sm:w-auto sm:text-sm disabled:opacity-50"}," Cancelar ",8,Ee)])])])])):_("",!0)}},Oe={key:0,class:"fixed inset-0 z-50 overflow-y-auto"},Fe={class:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},Ne={class:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-2xl sm:w-full"},ze={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},De={class:"sm:flex sm:items-start"},Le={class:"mt-3 text-center sm:mt-0 sm:text-left w-full"},Ue={key:0,class:"mt-2"},Pe={class:"bg-gray-50 rounded-lg p-4 mb-4"},He={class:"grid grid-cols-2 gap-4 mb-4"},qe={class:"text-sm font-medium"},Re={class:"text-sm font-medium"},Ge={class:"border-t pt-3"},Ze={class:"space-y-2"},Ke={class:"flex justify-between text-sm"},Je={class:"font-medium"},Ye={class:"flex justify-between text-sm"},Qe={class:"font-medium"},We={class:"flex justify-between text-sm text-gray-600"},Xe={class:"flex justify-between text-sm text-gray-600"},et={class:"flex justify-between text-sm text-gray-600"},tt={class:"flex justify-between text-sm text-gray-600"},st={class:"flex justify-between text-sm font-medium border-t pt-2"},ot={class:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4"},lt={class:"flex justify-between items-center"},nt={class:"text-xs text-blue-700 mt-1"},at={class:"text-2xl font-bold text-blue-900"},rt={class:"mb-4"},it={class:"flex justify-between items-center mb-2"},dt={class:"relative"},ut=["readonly"],ct={key:0,class:"text-xs text-gray-500 mt-1"},mt={key:1,class:"text-xs text-gray-500 mt-1"},xt={key:0,class:"mb-4"},ft={class:"flex items-center"},vt={key:0,class:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},pt={key:1,class:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},bt={key:2,class:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},ht={class:"flex-1"},gt={class:"text-sm font-medium"},wt={class:"text-2xl font-bold mt-1"},yt={class:"mb-4"},kt={key:2,class:"bg-red-50 border border-red-200 rounded-lg p-3 mb-4"},_t={class:"text-sm text-red-700"},jt={class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse gap-2"},Ct=["disabled"],$t={key:0,class:"animate-spin -ml-1 mr-2 h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24"},Mt=["disabled"],Vt={__name:"CloseShiftModal",props:{modelValue:Boolean,shift:Object},emits:["update:modelValue","closed"],setup(x,{emit:g}){const w=x,k=g,u=h(null),b=h(""),p=h(!1),f=h(null),v=h(0),m=h(null),t=h(!1),o=h({200:0,100:0,50:0,20:0,10:0,5:0,2:0,1:0,.5:0,.2:0,.1:0}),a=$(()=>w.shift?w.shift.monto_inicial+w.shift.total_efectivo:0),j=$(()=>u.value!==null&&u.value>=0),T=$(()=>v.value>0?"bg-green-50 border border-green-200 text-green-700":v.value<0?"bg-red-50 border border-red-200 text-red-700":"bg-blue-50 border border-blue-200 text-blue-700"),O=$(()=>v.value>0?"Sobrante":v.value<0?"Faltante":"Cuadrado Perfecto");z(()=>w.modelValue,c=>{c&&(H(()=>{var s;(s=m.value)==null||s.focus()}),u.value=null,b.value="",f.value=null,v.value=0,t.value=!1,Object.keys(o.value).forEach(s=>{o.value[s]=0}))});const A=()=>{u.value!==null&&u.value!==""?v.value=parseFloat(u.value)-a.value:v.value=0},F=c=>{u.value=c,A()},B=async()=>{if(!(!j.value||p.value)){f.value=null,p.value=!0;try{const c={montoReal:parseFloat(u.value),notas:b.value.trim()};t.value&&(c.breakdown={...o.value}),k("closed",c)}catch(c){f.value=c.message||"Error al cerrar el turno"}finally{p.value=!1}}},N=()=>{p.value||k("update:modelValue",!1)},r=c=>`S/ ${parseFloat(c||0).toFixed(2)}`,l=c=>c?new Date(c).toLocaleString("es-PE",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"";return(c,s)=>x.modelValue?(d(),i("div",Oe,[e("div",Fe,[s[24]||(s[24]=e("div",{class:"fixed inset-0 transition-opacity","aria-hidden":"true"},[e("div",{class:"absolute inset-0 bg-gray-500 opacity-75"})],-1)),s[25]||(s[25]=e("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"},"​",-1)),e("div",Ne,[e("div",ze,[e("div",De,[e("div",Le,[s[22]||(s[22]=e("h3",{class:"text-lg leading-6 font-medium text-gray-900 mb-4"}," Cerrar Turno de Caja ",-1)),x.shift?(d(),i("div",Ue,[e("div",Pe,[s[14]||(s[14]=e("h4",{class:"text-sm font-medium text-gray-700 mb-3"},"Resumen del Turno",-1)),e("div",He,[e("div",null,[s[4]||(s[4]=e("p",{class:"text-xs text-gray-500"},"Inicio",-1)),e("p",qe,n(l(x.shift.fecha_apertura)),1)]),e("div",null,[s[5]||(s[5]=e("p",{class:"text-xs text-gray-500"},"Monto Inicial",-1)),e("p",Re,n(r(x.shift.monto_inicial)),1)])]),e("div",Ge,[s[13]||(s[13]=e("p",{class:"text-xs text-gray-500 mb-2"},"Ventas del Turno",-1)),e("div",Ze,[e("div",Ke,[s[6]||(s[6]=e("span",null,"Número de ventas:",-1)),e("span",Je,n(x.shift.numero_ventas||0),1)]),e("div",Ye,[s[7]||(s[7]=e("span",null,"Efectivo:",-1)),e("span",Qe,n(r(x.shift.total_efectivo)),1)]),e("div",We,[s[8]||(s[8]=e("span",null,"Tarjeta:",-1)),e("span",null,n(r(x.shift.total_tarjeta)),1)]),e("div",Xe,[s[9]||(s[9]=e("span",null,"Yape:",-1)),e("span",null,n(r(x.shift.total_yape)),1)]),e("div",et,[s[10]||(s[10]=e("span",null,"Plin:",-1)),e("span",null,n(r(x.shift.total_plin)),1)]),e("div",tt,[s[11]||(s[11]=e("span",null,"Transferencia:",-1)),e("span",null,n(r(x.shift.total_transferencia)),1)]),e("div",st,[s[12]||(s[12]=e("span",null,"Total Ventas:",-1)),e("span",null,n(r(x.shift.total_ventas)),1)])])])]),e("div",ot,[e("div",lt,[e("div",null,[s[15]||(s[15]=e("p",{class:"text-sm font-medium text-blue-900"},"Efectivo Esperado en Caja",-1)),e("p",nt," Inicial ("+n(r(x.shift.monto_inicial))+") + Efectivo de ventas ("+n(r(x.shift.total_efectivo))+") ",1)]),e("p",at,n(r(a.value)),1)])]),e("div",rt,[e("div",it,[s[16]||(s[16]=e("label",{for:"monto-real",class:"block text-sm font-medium text-gray-700"}," Efectivo Real Contado * ",-1)),e("button",{type:"button",onClick:s[0]||(s[0]=S=>t.value=!t.value),class:"text-xs text-blue-600 hover:text-blue-800 underline"},n(t.value?"Ocultar":"Desglosar")+" denominaciones ",1)]),e("div",dt,[s[17]||(s[17]=e("span",{class:"absolute left-3 top-2 text-gray-500"},"S/",-1)),I(e("input",{id:"monto-real",ref_key:"montoInput",ref:m,"onUpdate:modelValue":s[1]||(s[1]=S=>u.value=S),type:"number",step:"0.01",min:"0",placeholder:"0.00",readonly:t.value,class:V(["pl-10 w-full p-2 border rounded-lg focus:ring-2 focus:ring-blue-500 text-lg font-medium",t.value?"bg-gray-100 cursor-not-allowed":""]),onInput:A,onKeyup:q(B,["enter"])},null,42,ut),[[E,u.value]])]),t.value?(d(),i("p",mt," El monto se calcula automáticamente del desglose ")):(d(),i("p",ct," Cuente el efectivo real que tiene en caja y registre el monto exacto "))]),t.value?(d(),i("div",xt,[y(R,{modelValue:o.value,"onUpdate:modelValue":s[2]||(s[2]=S=>o.value=S),"expected-amount":a.value,title:"Arqueo de Cierre - Conteo de denominaciones","total-label":"Efectivo Real Contado","onUpdate:total":F},null,8,["modelValue","expected-amount"])])):_("",!0),u.value!==null&&u.value!==""?(d(),i("div",{key:1,class:V(["mb-4 p-4 rounded-lg",T.value])},[e("div",ft,[v.value>0?(d(),i("svg",vt,s[18]||(s[18]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"},null,-1)]))):v.value<0?(d(),i("svg",pt,s[19]||(s[19]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 17h8m0 0V9m0 8l-8-8-4 4-6-6"},null,-1)]))):(d(),i("svg",bt,s[20]||(s[20]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)]))),e("div",ht,[e("p",gt,n(O.value),1),e("p",wt,n(r(Math.abs(v.value))),1)])])],2)):_("",!0),e("div",yt,[s[21]||(s[21]=e("label",{for:"notas",class:"block text-sm font-medium text-gray-700 mb-2"}," Notas de Cierre (Opcional) ",-1)),I(e("textarea",{id:"notas","onUpdate:modelValue":s[3]||(s[3]=S=>b.value=S),rows:"3",placeholder:"Ej: Observaciones, incidencias, billetes dañados...",class:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-blue-500"},null,512),[[E,b.value]])]),f.value?(d(),i("div",kt,[e("p",_t,n(f.value),1)])):_("",!0)])):_("",!0)])])]),e("div",jt,[e("button",{onClick:B,disabled:p.value||!j.value,class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none sm:w-auto sm:text-sm disabled:opacity-50 disabled:cursor-not-allowed"},[p.value?(d(),i("svg",$t,s[23]||(s[23]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):_("",!0),D(" "+n(p.value?"Cerrando...":"Cerrar Turno"),1)],8,Ct),e("button",{onClick:N,disabled:p.value,class:"mt-3 sm:mt-0 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none sm:w-auto sm:text-sm disabled:opacity-50"}," Cancelar ",8,Mt)])])])])):_("",!0)}},St={class:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8"},At={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"},Bt={class:"block"},It={class:"flex flex-col items-center justify-center h-full text-center"},Et={key:0,class:"w-full mb-3"},Tt={class:"bg-green-50 border border-green-200 rounded-lg p-3 mb-2"},Ot={class:"text-sm text-green-700"},Ft={class:"text-lg font-bold text-green-900 mt-1"},Nt={key:0,class:"text-xs text-green-600 mt-1"},zt={key:1,class:"w-full"},Ut={__name:"Menu",setup(x){const g=Z();K();const w=h(!1),k=h(!1);J(async()=>{await g.fetchActiveShift()});const u=()=>{w.value=!0},b=()=>{k.value=!0},p=async m=>{const t=await g.openShift(m.montoInicial,m.notas,m.cajaNumero);if(t.success){w.value=!1;const o="Turno abierto exitosamente",a=m.cajaNumero?`
Caja: ${m.cajaNumero}`:"";alert(o+a)}else alert(t.error||"Error al abrir el turno")},f=async m=>{const t=await g.closeShift(m.montoReal,m.notas);if(t.success){k.value=!1;const o=t.data,a=o.diferencia;let j=`Turno cerrado exitosamente

`;j+=`Esperado: S/ ${o.monto_esperado.toFixed(2)}
`,j+=`Real: S/ ${o.monto_real.toFixed(2)}
`,a>0?j+=`
Sobrante: S/ ${a.toFixed(2)}`:a<0?j+=`
Faltante: S/ ${Math.abs(a).toFixed(2)}`:j+=`
¡Cuadrado perfecto! ✓`,alert(j)}else alert(t.error||"Error al cerrar el turno")},v=m=>m?new Date(m).toLocaleString("es-PE",{hour:"2-digit",minute:"2-digit",day:"2-digit",month:"short"}):"";return(m,t)=>{const o=Y("router-link");return d(),i("div",St,[t[18]||(t[18]=e("h1",{class:"text-2xl font-semibold text-gray-900 mb-6"},"Menú Principal",-1)),e("div",At,[y(o,{to:"/dashboard",class:"block"},{default:C(()=>t[2]||(t[2]=[e("div",{class:"bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow duration-300 p-6 h-full border-l-4 border-orange-500"},[e("div",{class:"flex flex-col items-center justify-center h-full text-center"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-16 w-16 text-orange-500 mb-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83"}),e("path",{d:"M22 12A10 10 0 0 0 12 2v10z"})]),e("h2",{class:"text-xl font-medium text-gray-900 mb-2"},"Dashboard"),e("p",{class:"text-gray-600 text-center"},"Visualiza indicadores y gráficos")])],-1)])),_:1}),e("div",Bt,[e("div",{class:V(["bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow duration-300 p-6 h-full",M(g).hasActiveShift?"border-l-4 border-green-500":"border-l-4 border-red-500"])},[e("div",It,[(d(),i("svg",{xmlns:"http://www.w3.org/2000/svg",class:V([M(g).hasActiveShift?"text-green-500":"text-red-500","h-16 w-16 mb-4"]),viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},t[3]||(t[3]=[e("rect",{x:"2",y:"5",width:"20",height:"14",rx:"2"},null,-1),e("line",{x1:"2",y1:"10",x2:"22",y2:"10"},null,-1)]),2)),t[7]||(t[7]=e("h2",{class:"text-xl font-medium text-gray-900 mb-2"},"Caja",-1)),M(g).hasActiveShift?(d(),i("div",Et,[e("div",Tt,[t[4]||(t[4]=e("p",{class:"text-xs font-medium text-green-800 mb-1"},"Turno Abierto",-1)),e("p",Ot,"Inicio: "+n(v(M(g).activeShift.fecha_apertura)),1),e("p",Ft," S/ "+n(M(g).activeShift.monto_inicial.toFixed(2)),1),M(g).activeShift.caja_numero?(d(),i("p",Nt,n(M(g).activeShift.caja_numero),1)):_("",!0)]),e("button",{onClick:b,class:"w-full px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors text-sm font-medium"}," Cerrar Turno ")])):(d(),i("div",zt,[t[5]||(t[5]=e("p",{class:"text-gray-600 text-sm mb-3"},"No hay turno activo",-1)),e("button",{onClick:u,class:"w-full px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm font-medium"}," Abrir Turno ")])),y(o,{to:"/shifts",class:"text-xs text-blue-600 hover:text-blue-800 mt-3 underline"},{default:C(()=>t[6]||(t[6]=[D(" Ver historial de turnos ")])),_:1})])],2)]),y(o,{to:"/pos",class:"block"},{default:C(()=>t[8]||(t[8]=[e("div",{class:"bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow duration-300 p-6 h-full border-l-4 border-blue-500"},[e("div",{class:"flex flex-col items-center justify-center h-full text-center"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-16 w-16 text-blue-500 mb-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("rect",{x:"2",y:"3",width:"20",height:"14",rx:"2",ry:"2"}),e("line",{x1:"8",y1:"21",x2:"16",y2:"21"}),e("line",{x1:"12",y1:"17",x2:"12",y2:"21"})]),e("h2",{class:"text-xl font-medium text-gray-900 mb-2"},"POS"),e("p",{class:"text-gray-600 text-center"},"Gestiona ventas y emite comprobantes")])],-1)])),_:1}),y(o,{to:"/inventory",class:"block"},{default:C(()=>t[9]||(t[9]=[e("div",{class:"bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow duration-300 p-6 h-full border-l-4 border-green-500"},[e("div",{class:"flex flex-col items-center justify-center h-full text-center"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-16 w-16 text-green-500 mb-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M2.97 12.92A2 2 0 0 0 2 14.63v3.24a2 2 0 0 0 .97 1.71l3 1.8a2 2 0 0 0 2.06 0L12 19v-5.5l-5-3-4.03 2.42Z"}),e("path",{d:"m7 16.5-4.74-2.85"}),e("path",{d:"m7 16.5 5-3"}),e("path",{d:"M7 16.5v5.17"}),e("path",{d:"M12 13.5V19l3.97 2.38a2 2 0 0 0 2.06 0l3-1.8a2 2 0 0 0 .97-1.71v-3.24a2 2 0 0 0-.97-1.71L17 10.5l-5 3Z"}),e("path",{d:"m17 16.5-5-3"}),e("path",{d:"m17 16.5 4.74-2.85"}),e("path",{d:"M17 16.5v5.17"}),e("path",{d:"M7.97 4.42A2 2 0 0 0 7 6.13v4.37l5 3 5-3V6.13a2 2 0 0 0-.97-1.71l-3-1.8a2 2 0 0 0-2.06 0l-3 1.8Z"}),e("path",{d:"M12 8 7.26 5.15"}),e("path",{d:"m12 8 4.74-2.85"}),e("path",{d:"M12 13.5V8"})]),e("h2",{class:"text-xl font-medium text-gray-900 mb-2"},"Inventario"),e("p",{class:"text-gray-600 text-center"},"Gestiona productos, stock y categorías")])],-1)])),_:1}),y(o,{to:"/sales",class:"block"},{default:C(()=>t[10]||(t[10]=[e("div",{class:"bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow duration-300 p-6 h-full border-l-4 border-cyan-500"},[e("div",{class:"flex flex-col items-center justify-center h-full text-center"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-16 w-16 text-cyan-500 mb-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M3 3v18h18"}),e("path",{d:"M18.4 8.64L18.57 8.8a2 2 0 0 1 0 2.83l-8.49 8.48a2 2 0 0 1-2.83 0l-.17-.17a2 2 0 0 1 0-2.83l8.49-8.48a2 2 0 0 1 2.83 0Z"}),e("path",{d:"M15 8h5v5"}),e("path",{d:"M18 11l-7 7"})]),e("h2",{class:"text-xl font-medium text-gray-900 mb-2"},"Ventas"),e("p",{class:"text-gray-600 text-center"},"Consulta el historial de ventas")])],-1)])),_:1}),y(o,{to:"/customers",class:"block"},{default:C(()=>t[11]||(t[11]=[e("div",{class:"bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow duration-300 p-6 h-full border-l-4 border-purple-500"},[e("div",{class:"flex flex-col items-center justify-center h-full text-center"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-16 w-16 text-purple-500 mb-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),e("circle",{cx:"12",cy:"7",r:"4"})]),e("h2",{class:"text-xl font-medium text-gray-900 mb-2"},"Clientes"),e("p",{class:"text-gray-600 text-center"},"Administra tu cartera de clientes")])],-1)])),_:1}),y(o,{to:"/documents",class:"block"},{default:C(()=>t[12]||(t[12]=[e("div",{class:"bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow duration-300 p-6 h-full border-l-4 border-amber-500"},[e("div",{class:"flex flex-col items-center justify-center h-full text-center"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-16 w-16 text-amber-500 mb-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),e("polyline",{points:"14 2 14 8 20 8"}),e("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),e("line",{x1:"16",y1:"17",x2:"8",y2:"17"}),e("polyline",{points:"10 9 9 9 8 9"})]),e("h2",{class:"text-xl font-medium text-gray-900 mb-2"},"Documentos"),e("p",{class:"text-gray-600 text-center"},"Gestiona documentos y comprobantes")])],-1)])),_:1}),y(o,{to:"/promotions",class:"block"},{default:C(()=>t[13]||(t[13]=[e("div",{class:"bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow duration-300 p-6 h-full border-l-4 border-pink-500"},[e("div",{class:"flex flex-col items-center justify-center h-full text-center"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-16 w-16 text-pink-500 mb-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("line",{x1:"19",y1:"5",x2:"5",y2:"19"}),e("circle",{cx:"6.5",cy:"6.5",r:"2.5"}),e("circle",{cx:"17.5",cy:"17.5",r:"2.5"})]),e("h2",{class:"text-xl font-medium text-gray-900 mb-2"},"Descuentos y Promociones"),e("p",{class:"text-gray-600 text-center"},"Gestiona ofertas y promociones")])],-1)])),_:1}),y(o,{to:"/returns",class:"block"},{default:C(()=>t[14]||(t[14]=[e("div",{class:"bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow duration-300 p-6 h-full border-l-4 border-teal-500"},[e("div",{class:"flex flex-col items-center justify-center h-full text-center"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-16 w-16 text-teal-500 mb-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"}),e("path",{d:"M3 3v5h5"}),e("path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16"}),e("path",{d:"M16 16h5v5"})]),e("h2",{class:"text-xl font-medium text-gray-900 mb-2"},"Cambios y devoluciones"),e("p",{class:"text-gray-600 text-center"},"Gestiona cambios y devoluciones de productos")])],-1)])),_:1}),y(o,{to:"/vouchers",class:"block"},{default:C(()=>t[15]||(t[15]=[e("div",{class:"bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow duration-300 p-6 h-full border-l-4 border-yellow-500"},[e("div",{class:"flex flex-col items-center justify-center h-full text-center"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-16 w-16 text-yellow-500 mb-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("rect",{x:"3",y:"8",width:"18",height:"4",rx:"1"}),e("path",{d:"M12 8v13"}),e("path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7"}),e("path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5"})]),e("h2",{class:"text-xl font-medium text-gray-900 mb-2"},"Vales y Tarjetas de Regalo"),e("p",{class:"text-gray-600 text-center"},"Gestiona vales de consumo y tarjetas de regalo")])],-1)])),_:1}),y(o,{to:"/branches",class:"block"},{default:C(()=>t[16]||(t[16]=[e("div",{class:"bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow duration-300 p-6 h-full border-l-4 border-indigo-500"},[e("div",{class:"flex flex-col items-center justify-center h-full text-center"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-16 w-16 text-indigo-500 mb-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),e("polyline",{points:"9 22 9 12 15 12 15 22"})]),e("h2",{class:"text-xl font-medium text-gray-900 mb-2"},"Sucursales"),e("p",{class:"text-gray-600 text-center"},"Gestión de múltiples locales")])],-1)])),_:1}),y(o,{to:"/preferences",class:"block"},{default:C(()=>t[17]||(t[17]=[e("div",{class:"bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow duration-300 p-6 h-full border-l-4 border-gray-500"},[e("div",{class:"flex flex-col items-center justify-center h-full text-center"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-16 w-16 text-gray-500 mb-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[e("circle",{cx:"12",cy:"12",r:"3"}),e("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"})]),e("h2",{class:"text-xl font-medium text-gray-900 mb-2"},"Preferencias"),e("p",{class:"text-gray-600 text-center"},"Personaliza tu sistema")])],-1)])),_:1})]),y(Te,{modelValue:w.value,"onUpdate:modelValue":t[0]||(t[0]=a=>w.value=a),onOpened:p},null,8,["modelValue"]),y(Vt,{modelValue:k.value,"onUpdate:modelValue":t[1]||(t[1]=a=>k.value=a),shift:M(g).activeShift,onClosed:f},null,8,["modelValue","shift"])])}}};export{Ut as default};
